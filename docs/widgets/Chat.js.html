<!DOCTYPE html>
<html>
<head>
  <title>Chat.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "widgets/Chat.js";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#chat">Chat</a>
      </div>

      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>

      <div class="heading h3">
        <a href="#chat.modes">Chat.modes</a>
      </div>

      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>

      <div class="heading h2">
        <a href="#chat-constructor">Chat constructor</a>
      </div>

      <div class="heading h3">
        <a href="#chat.mode">Chat.mode</a>
      </div>

      <div class="heading h3">
        <a href="#chat.recipient">Chat.recipient</a>
      </div>

      <div class="heading h3">
        <a href="#chat.textarea">Chat.textarea</a>
      </div>

      <div class="heading h3">
        <a href="#chat.textareaid">Chat.textareaId</a>
      </div>

      <div class="heading h3">
        <a href="#chat.chat">Chat.chat</a>
      </div>

      <div class="heading h3">
        <a href="#chat.chatid">Chat.chatId</a>
      </div>

      <div class="heading h3">
        <a href="#chat.submit">Chat.submit</a>
      </div>

      <div class="heading h3">
        <a href="#chat.submitid">Chat.submitId</a>
      </div>

      <div class="heading h3">
        <a href="#chat.submittext">Chat.submitText</a>
      </div>

      <div class="heading h3">
        <a href="#chat.chatevent">Chat.chatEvent</a>
      </div>

      <div class="heading h3">
        <a href="#chat.displayname">Chat.displayName</a>
      </div>

      <div class="heading h3">
        <a href="#chat.recipient-1">Chat.recipient</a>
      </div>

      <div class="heading h2">
        <a href="#chat-methods">Chat methods</a>
      </div>

      <div class="heading h3">
        <a href="#chat.init">Chat.init</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat">
  <h1>
    <a href="#chat" name="chat" class="pilcrow"></a>
Chat
  </h1>
</div>
<p>Copyright(c) 2017 Stefano Balietti
MIT Licensed</p>
</div>
<div class="body">
<p>Creates a simple configurable chat</p>
<p>www.nodegame.org</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
<span class="hljs-meta">
    "use strict"</span>;

    node.widgets.register(<span class="hljs-string">'Chat'</span>, Chat);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow"></a>
Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    Chat.version = <span class="hljs-string">'0.5.2'</span>;
    Chat.description = <span class="hljs-string">'Offers a uni-/bi-directional communication interface '</span> +
        <span class="hljs-string">'between players, or between players and the experimenter.'</span>;

    Chat.title = <span class="hljs-string">'Chat'</span>;
    Chat.className = <span class="hljs-string">'chat'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chat.modes">
  <h3>
    <a href="#chat.modes" name="chat.modes" class="pilcrow"></a>
Chat.modes
  </h3>
</div>
<ul>
<li>
<p>MANY_TO_MANY: everybody can see all the messages, and it possible
to send private messages.</p>
</li>
<li>
<p>MANY_TO_ONE: everybody can see all the messages, private messages can
be received, but not sent.</p>
</li>
<li>
<p>ONE_TO_ONE: everybody sees only personal messages, private messages can
be received, but not sent. All messages are sent to the SERVER.</p>
</li>
<li>
<p>RECEIVER_ONLY: messages can only be received, but not sent.</p>
</li>
</ul>

        </td>
        <td class="code highlight">
          <pre class="javascript">    Chat.modes = {
        <span class="hljs-attr">MANY_TO_MANY</span>: <span class="hljs-string">'MANY_TO_MANY'</span>,
        <span class="hljs-attr">MANY_TO_ONE</span>: <span class="hljs-string">'MANY_TO_ONE'</span>,
        <span class="hljs-attr">ONE_TO_ONE</span>: <span class="hljs-string">'ONE_TO_ONE'</span>,
        <span class="hljs-attr">RECEIVER_ONLY</span>: <span class="hljs-string">'RECEIVER_ONLY'</span>
    };


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow"></a>
Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    Chat.dependencies = {
        <span class="hljs-attr">JSUS</span>: {}
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat-constructor">
  <h2>
    <a href="#chat-constructor" name="chat-constructor" class="pilcrow"></a>
Chat constructor
  </h2>
</div>
</div>
<div class="body">
<p><code>Chat</code> is a simple configurable chat</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Chat.init</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Chat</span>(<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.mode">
  <h3>
    <a href="#chat.mode" name="chat.mode" class="pilcrow"></a>
Chat.mode
  </h3>
</div>
</div>
<div class="body">
<p>Determines to mode of communication</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Chat.modes</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.mode = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.recipient">
  <h3>
    <a href="#chat.recipient" name="chat.recipient" class="pilcrow"></a>
Chat.recipient
  </h3>
</div>
</div>
<div class="body">
<p>Determines recipient of the messages</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.recipient = <span class="hljs-literal">null</span>;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.textarea">
  <h3>
    <a href="#chat.textarea" name="chat.textarea" class="pilcrow"></a>
Chat.textarea
  </h3>
</div>
</div>
<div class="body">
<p>The textarea wherein to write and read</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.textarea = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.textareaid">
  <h3>
    <a href="#chat.textareaid" name="chat.textareaid" class="pilcrow"></a>
Chat.textareaId
  </h3>
</div>
</div>
<div class="body">
<p>The id of the textarea</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.textareaId = <span class="hljs-literal">null</span>;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.chat">
  <h3>
    <a href="#chat.chat" name="chat.chat" class="pilcrow"></a>
Chat.chat
  </h3>
</div>
</div>
<div class="body">
<p>The DIV wherein to display the chat</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.chat = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.chatid">
  <h3>
    <a href="#chat.chatid" name="chat.chatid" class="pilcrow"></a>
Chat.chatId
  </h3>
</div>
</div>
<div class="body">
<p>The id of the chat DIV</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.chatId = <span class="hljs-literal">null</span>;


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.submit">
  <h3>
    <a href="#chat.submit" name="chat.submit" class="pilcrow"></a>
Chat.submit
  </h3>
</div>
</div>
<div class="body">
<p>The submit button</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.submit = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.submitid">
  <h3>
    <a href="#chat.submitid" name="chat.submitid" class="pilcrow"></a>
Chat.submitId
  </h3>
</div>
</div>
<div class="body">
<p>The id of the submit butten</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.submitId = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.submittext">
  <h3>
    <a href="#chat.submittext" name="chat.submittext" class="pilcrow"></a>
Chat.submitText
  </h3>
</div>
</div>
<div class="body">
<p>The text on the submit button</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.submitText = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.chatevent">
  <h3>
    <a href="#chat.chatevent" name="chat.chatevent" class="pilcrow"></a>
Chat.chatEvent
  </h3>
</div>
</div>
<div class="body">
<p>The event to fire when sending a message</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.chatEvent = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.displayname">
  <h3>
    <a href="#chat.displayname" name="chat.displayname" class="pilcrow"></a>
Chat.displayName
  </h3>
</div>
</div>
<div class="body">
<p>Function which displays the sender's name</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.displayName = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.recipient-1">
  <h3>
    <a href="#chat.recipient-1" name="chat.recipient-1" class="pilcrow"></a>
Chat.recipient
  </h3>
</div>
</div>
<div class="body">
<p>Object containing the value of the recipient of the message</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.recipient = { <span class="hljs-attr">value</span>: <span class="hljs-literal">null</span> };
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chat-methods">
  <h2>
    <a href="#chat-methods" name="chat-methods" class="pilcrow"></a>
Chat methods
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chat.init">
  <h3>
    <a href="#chat.init" name="chat.init" class="pilcrow"></a>
Chat.init
  </h3>
</div>
</div>
<div class="body">
<p>Initializes the widget</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Configuration options.
The  options object can have the following attributes:
<ul>
<li><code>mode</code>: Determines to mode of communication</li>
<li><code>textareaId</code>: The id of the textarea</li>
<li><code>chatId</code>: The id of the chat DIV</li>
<li><code>submitId</code>: The id of the submit butten</li>
<li><code>submitText</code>: The text on the submit button</li>
<li><code>chatEvent</code>: The event to fire when sending a message</li>
<li><code>displayName</code>: Function which displays the sender's name</li>
</ul>
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    Chat.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> tmp;
        options = options || {};

        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.mode) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>Will be setup later.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            options.mode = <span class="hljs-string">'MANY_TO_MANY'</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.mode) {
            <span class="hljs-keyword">switch</span>(options.mode) {
            <span class="hljs-keyword">case</span> Chat.modes.RECEIVER_ONLY:
                tmp = <span class="hljs-string">'SERVER'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Chat.modes.MANY_TO_ONE:
                tmp = <span class="hljs-string">'ROOM'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Chat.modes.ONE_TO_ONE:
                tmp = <span class="hljs-string">'SERVER'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> Chat.modes.MANY_TO_MANY:
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Chat.init: options.mode is invalid: '</span> +
                                options.mode);
            }
            <span class="hljs-keyword">this</span>.recipient.value = tmp;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Chat.init: options.mode must be string or '</span> +
                            <span class="hljs-string">'undefined. Found: '</span> + options.mode);
        }

        <span class="hljs-keyword">this</span>.mode = options.mode;

        <span class="hljs-keyword">this</span>.textareaId = options.textareaId || <span class="hljs-string">'chat_textarea'</span>;
        <span class="hljs-keyword">this</span>.chatId = options.chatId || <span class="hljs-string">'chat_chat'</span>;
        <span class="hljs-keyword">this</span>.submitId = options.submitId || <span class="hljs-string">'chat_submit'</span>;

        <span class="hljs-keyword">this</span>.chatEvent = options.chatEvent || <span class="hljs-string">'CHAT'</span>;
        <span class="hljs-keyword">this</span>.submitText = options.submitText || <span class="hljs-string">'chat'</span>;

        <span class="hljs-keyword">this</span>.displayName = options.displayName || <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">from</span>) </span>{
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">from</span>;
        };
    };


    Chat.prototype.append = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{

        <span class="hljs-keyword">this</span>.chat = W.get(<span class="hljs-string">'div'</span>, <span class="hljs-keyword">this</span>.chatId);
        <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.chat);

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mode !== Chat.modes.RECEIVER_ONLY) {

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>Create buttons to send messages, if allowed.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">this</span>.submit = W.getEventButton(<span class="hljs-keyword">this</span>.chatEvent,
                                           <span class="hljs-keyword">this</span>.submitText,
                                           <span class="hljs-keyword">this</span>.submitId);
            <span class="hljs-keyword">this</span>.submit.className = <span class="hljs-string">'btn btn-sm btn-secondary'</span>;
            <span class="hljs-keyword">this</span>.textarea = W.get(<span class="hljs-string">'textarea'</span>, <span class="hljs-keyword">this</span>.textareaId);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>Append them.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            W.writeln(<span class="hljs-string">''</span>, <span class="hljs-keyword">this</span>.bodyDiv);
            <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.textarea);
            W.writeln(<span class="hljs-string">''</span>, <span class="hljs-keyword">this</span>.bodyDiv);
            <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.submit);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>Add recipient selector, if requested.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mode === Chat.modes.MANY_TO_MANY) {
                <span class="hljs-keyword">this</span>.recipient = W.getRecipientSelector();
                <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.recipient);
            }
        }
    };

    Chat.prototype.readTA = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> txt;
        txt = <span class="hljs-keyword">this</span>.textarea.value;
        <span class="hljs-keyword">this</span>.textarea.value = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">return</span> txt;
    };

    Chat.prototype.writeTA = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">string, args</span>) </span>{
        J.sprintf(string, args, <span class="hljs-keyword">this</span>.chat);
        W.writeln(<span class="hljs-string">''</span>, <span class="hljs-keyword">this</span>.chat);
        <span class="hljs-keyword">this</span>.chat.scrollTop = <span class="hljs-keyword">this</span>.chat.scrollHeight;
    };

    Chat.prototype.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

        node.on(<span class="hljs-keyword">this</span>.chatEvent, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> msg, to, args;
            msg = that.readTA();
            <span class="hljs-keyword">if</span> (!msg) <span class="hljs-keyword">return</span>;

            to = that.recipient.value;
            args = {
                <span class="hljs-string">'%s'</span>: {
                    <span class="hljs-string">'class'</span>: <span class="hljs-string">'chat_me'</span>
                },
                <span class="hljs-string">'%msg'</span>: {
                    <span class="hljs-string">'class'</span>: <span class="hljs-string">'chat_msg'</span>
                },
                <span class="hljs-string">'!txt'</span>: msg,
                <span class="hljs-string">'!to'</span>: to
            };
            that.writeTA(<span class="hljs-string">'%sMe -&gt; !to%s: %msg!txt%msg'</span>, args);
            node.say(that.chatEvent, to, msg.trim());
        });

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mode === Chat.modes.MANY_TO_MANY) {
            node.on(<span class="hljs-string">'UPDATED_PLIST'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
                W.populateRecipientSelector(that.recipient,
                    node.game.pl.fetch());
            });
        }

        node.on.data(<span class="hljs-keyword">this</span>.chatEvent, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>) </span>{
            <span class="hljs-keyword">var</span> <span class="hljs-keyword">from</span>, args;
            <span class="hljs-keyword">if</span> (msg.from === node.player.id || msg.from === node.player.sid) {
                <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mode === Chat.modes.ONE_TO_ONE) {
                <span class="hljs-keyword">if</span> (msg.from === <span class="hljs-keyword">this</span>.recipient.value) {
                    <span class="hljs-keyword">return</span>;
                }
            }

            <span class="hljs-keyword">from</span> = that.displayName(msg.from);
            args = {
                <span class="hljs-string">'%s'</span>: {
                    <span class="hljs-string">'class'</span>: <span class="hljs-string">'chat_others'</span>
                },
                <span class="hljs-string">'%msg'</span>: {
                    <span class="hljs-string">'class'</span>: <span class="hljs-string">'chat_msg'</span>
                },
                <span class="hljs-string">'!txt'</span>: msg.data,
                <span class="hljs-string">'!from'</span>: <span class="hljs-keyword">from</span>
            };

            that.writeTA(<span class="hljs-string">'%s!from%s: %msg!txt%msg'</span>, args);
        });
    };

})(node);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
