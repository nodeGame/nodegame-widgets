<!DOCTYPE html>
<html>
<head>
  <title>ChoiceTable.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "widgets/ChoiceTable.js";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#choicetable">ChoiceTable</a>
      </div>

      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>

      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>

      <div class="heading h2">
        <a href="#choicetable-constructor">ChoiceTable constructor</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.table">ChoiceTable.table</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.tr">ChoiceTable.tr</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.listener">ChoiceTable.listener</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.maintext">ChoiceTable.mainText</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.spanmaintext">ChoiceTable.spanMainText</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.choices">ChoiceTable.choices</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.choicesvalues">ChoiceTable.choicesValues</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.choicesids">ChoiceTable.choicesIds</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.choicescells">ChoiceTable.choicesCells</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.left">ChoiceTable.left</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.leftcell">ChoiceTable.leftCell</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.right">ChoiceTable.right</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.rightcell">ChoiceTable.rightCell</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.timecurrentchoice">ChoiceTable.timeCurrentChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.timefrom">ChoiceTable.timeFrom</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.order">ChoiceTable.order</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.originalorder">ChoiceTable.originalOrder</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.correctchoice">ChoiceTable.correctChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.requiredchoice">ChoiceTable.requiredChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.attempts">ChoiceTable.attempts</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.numberofclicks">ChoiceTable.numberOfClicks</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.selected">ChoiceTable.selected</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.currentchoice">ChoiceTable.currentChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.selectmultiple">ChoiceTable.selectMultiple</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.shufflechoices">ChoiceTable.shuffleChoices</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.renderer">ChoiceTable.renderer</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.orientation">ChoiceTable.orientation</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.group">ChoiceTable.group</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.grouporder">ChoiceTable.groupOrder</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.freetext">ChoiceTable.freeText</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.textarea">ChoiceTable.textarea</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.separator">ChoiceTable.separator</a>
      </div>

      <div class="heading h2">
        <a href="#choicetable-methods">ChoiceTable methods</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.init">ChoiceTable.init</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.setchoices">ChoiceTable.setChoices</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.buildchoices">ChoiceTable.buildChoices</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.buildtable">ChoiceTable.buildTable</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.buildtableandchoices">ChoiceTable.buildTableAndChoices</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.renderspecial">ChoiceTable.renderSpecial</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.renderchoice">ChoiceTable.renderChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.setcorrectchoice">ChoiceTable.setCorrectChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.append">ChoiceTable.append</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.listeners">ChoiceTable.listeners</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.disable">ChoiceTable.disable</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.enable">ChoiceTable.enable</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.verifychoice">ChoiceTable.verifyChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.setcurrentchoice">ChoiceTable.setCurrentChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.unsetcurrentchoice">ChoiceTable.unsetCurrentChoice</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.ischoicecurrent">ChoiceTable.isChoiceCurrent</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.highlight">ChoiceTable.highlight</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.unhighlight">ChoiceTable.unhighlight</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.getvalues">ChoiceTable.getValues</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.setvalues">ChoiceTable.setValues</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.reset">ChoiceTable.reset</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.shuffle">ChoiceTable.shuffle</a>
      </div>

      <div class="heading h2">
        <a href="#helper-methods">Helper methods.</a>
      </div>

      <div class="heading h3">
        <a href="#checkcorrectchoiceparam">checkCorrectChoiceParam</a>
      </div>

      <div class="heading h3">
        <a href="#createtr">createTR</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable">
  <h1>
    <a href="#choicetable" name="choicetable" class="pilcrow"></a>
ChoiceTable
  </h1>
</div>
<p>Copyright(c) 2017 Stefano Balietti
MIT Licensed</p>
</div>
<div class="body">
<p>Creates a configurable table where each cell is a selectable choice</p>
<p>www.nodegame.org</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
<span class="hljs-meta">
    "use strict"</span>;

    node.widgets.register(<span class="hljs-string">'ChoiceTable'</span>, ChoiceTable);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow"></a>
Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    ChoiceTable.version = <span class="hljs-string">'1.3.0'</span>;
    ChoiceTable.description = <span class="hljs-string">'Creates a configurable table where '</span> +
        <span class="hljs-string">'each cell is a selectable choice.'</span>;

    ChoiceTable.title = <span class="hljs-string">'Make your choice'</span>;
    ChoiceTable.className = <span class="hljs-string">'choicetable'</span>;

    ChoiceTable.separator = <span class="hljs-string">'::'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow"></a>
Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    ChoiceTable.dependencies = {
        <span class="hljs-attr">JSUS</span>: {}
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable-constructor">
  <h2>
    <a href="#choicetable-constructor" name="choicetable-constructor" class="pilcrow"></a>
ChoiceTable constructor
  </h2>
</div>
</div>
<div class="body">
<p>Creates a new instance of ChoiceTable</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Configuration options.   If a <code>table</code> option is specified, it sets it as the clickable
table. All other options are passed to the init method.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ChoiceTable</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> that;
        that = <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.table">
  <h3>
    <a href="#choicetable.table" name="choicetable.table" class="pilcrow"></a>
ChoiceTable.table
  </h3>
</div>
</div>
<div class="body">
<p>The HTML element triggering the listener function when clicked</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.table = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.tr">
  <h3>
    <a href="#choicetable.tr" name="choicetable.tr" class="pilcrow"></a>
ChoiceTable.tr
  </h3>
</div>
</div>
<div class="body">
<p>Reference to TR elements of the table</p>
<p>Note: if the orientation is vertical there will be multiple TR
otherwise just one.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">createTR</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.trs = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.listener">
  <h3>
    <a href="#choicetable.listener" name="choicetable.listener" class="pilcrow"></a>
ChoiceTable.listener
  </h3>
</div>
</div>
<div class="body">
<p>The listener function</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.listener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
            <span class="hljs-keyword">var</span> name, value, td, oldSelected;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<p>Relative time.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> that.timeFrom) {
                that.timeCurrentChoice = node.timer.getTimeSince(that.timeFrom);
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<p>Absolute time.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">else</span> {
                that.timeCurrentChoice = <span class="hljs-built_in">Date</span>.now ?
                    <span class="hljs-built_in">Date</span>.now() : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
            }

            e = e || <span class="hljs-built_in">window</span>.event;
            td = e.target || e.srcElement;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<p>Not a clickable choice.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> that.choicesIds[td.id]) <span class="hljs-keyword">return</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<p>Id of elements are in the form of name_value or name_item_value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            value = td.id.split(that.separator);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<p>Separator not found, not a clickable cell.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (value.length === <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

            name = value[<span class="hljs-number">0</span>];
            value = value[<span class="hljs-number">1</span>];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>One more click.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            that.numberOfClicks++;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>If only 1 selection allowed, remove selection from oldSelected.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (!that.selectMultiple) {
                oldSelected = that.selected;
                <span class="hljs-keyword">if</span> (oldSelected) J.removeClass(oldSelected, <span class="hljs-string">'selected'</span>);

                <span class="hljs-keyword">if</span> (that.isChoiceCurrent(value)) {
                    that.unsetCurrentChoice(value);
                }
                <span class="hljs-keyword">else</span> {
                    that.currentChoice = value;
                    J.addClass(td, <span class="hljs-string">'selected'</span>);
                    that.selected = td;
                }
            }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>Remove any warning/error from form on click.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (that.isHighlighted()) that.unhighlight();
        };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.maintext">
  <h3>
    <a href="#choicetable.maintext" name="choicetable.maintext" class="pilcrow"></a>
ChoiceTable.mainText
  </h3>
</div>
</div>
<div class="body">
<p>The main text introducing the choices</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.spanMainText</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.mainText = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.spanmaintext">
  <h3>
    <a href="#choicetable.spanmaintext" name="choicetable.spanmaintext" class="pilcrow"></a>
ChoiceTable.spanMainText
  </h3>
</div>
</div>
<div class="body">
<p>The span containing the main text</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.spanMainText = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.choices">
  <h3>
    <a href="#choicetable.choices" name="choicetable.choices" class="pilcrow"></a>
ChoiceTable.choices
  </h3>
</div>
</div>
<div class="body">
<p>The array available choices</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.choices = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.choicesvalues">
  <h3>
    <a href="#choicetable.choicesvalues" name="choicetable.choicesvalues" class="pilcrow"></a>
ChoiceTable.choicesValues
  </h3>
</div>
</div>
<div class="body">
<p>Map of choices' values to indexes in the choices array</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.choicesValues = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.choicesids">
  <h3>
    <a href="#choicetable.choicesids" name="choicetable.choicesids" class="pilcrow"></a>
ChoiceTable.choicesIds
  </h3>
</div>
</div>
<div class="body">
<p>Map of choices' cells ids to choices</p>
<p>Used to determine what are the clickable choices.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.choicesIds = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.choicescells">
  <h3>
    <a href="#choicetable.choicescells" name="choicetable.choicescells" class="pilcrow"></a>
ChoiceTable.choicesCells
  </h3>
</div>
</div>
<div class="body">
<p>The cells of the table associated with each choice</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.choicesCells = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.left">
  <h3>
    <a href="#choicetable.left" name="choicetable.left" class="pilcrow"></a>
ChoiceTable.left
  </h3>
</div>
</div>
<div class="body">
<p>A non-clickable first cell of the row/column</p>
<p>It will be placed to the left of the choices if orientation
is horizontal, or above the choices if orientation is vertical</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.orientation</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.left = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.leftcell">
  <h3>
    <a href="#choicetable.leftcell" name="choicetable.leftcell" class="pilcrow"></a>
ChoiceTable.leftCell
  </h3>
</div>
</div>
<div class="body">
<p>The rendered left cell</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderSpecial</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.leftCell = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.right">
  <h3>
    <a href="#choicetable.right" name="choicetable.right" class="pilcrow"></a>
ChoiceTable.right
  </h3>
</div>
</div>
<div class="body">
<p>A non-clickable last cell of the row/column</p>
<p>It will be placed to the right of the choices if orientation
is horizontal, or below the choices if orientation is vertical</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.orientation</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.right = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.rightcell">
  <h3>
    <a href="#choicetable.rightcell" name="choicetable.rightcell" class="pilcrow"></a>
ChoiceTable.rightCell
  </h3>
</div>
</div>
<div class="body">
<p>The rendered right cell</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderSpecial</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.rightCell = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.timecurrentchoice">
  <h3>
    <a href="#choicetable.timecurrentchoice" name="choicetable.timecurrentchoice" class="pilcrow"></a>
ChoiceTable.timeCurrentChoice
  </h3>
</div>
</div>
<div class="body">
<p>Time when the last choice was made</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.timeCurrentChoice = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.timefrom">
  <h3>
    <a href="#choicetable.timefrom" name="choicetable.timefrom" class="pilcrow"></a>
ChoiceTable.timeFrom
  </h3>
</div>
</div>
<div class="body">
<p>Time is measured from timestamp as saved by node.timer</p>
<p>Default event is a new step is loaded (user can interact with
the screen). Set it to FALSE, to have absolute time.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">node.timer.getTimeSince</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.timeFrom = <span class="hljs-string">'step'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.order">
  <h3>
    <a href="#choicetable.order" name="choicetable.order" class="pilcrow"></a>
ChoiceTable.order
  </h3>
</div>
</div>
<div class="body">
<p>The current order of display of choices</p>
<p>May differ from <code>originalOrder</code> if shuffled.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.originalOrder</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.order = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.originalorder">
  <h3>
    <a href="#choicetable.originalorder" name="choicetable.originalorder" class="pilcrow"></a>
ChoiceTable.originalOrder
  </h3>
</div>
</div>
<div class="body">
<p>The initial order of display of choices</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.order</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.originalOrder = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.correctchoice">
  <h3>
    <a href="#choicetable.correctchoice" name="choicetable.correctchoice" class="pilcrow"></a>
ChoiceTable.correctChoice
  </h3>
</div>
</div>
<div class="body">
<p>The array of correct choice/s</p>
<p>The field is an array or number|string depending
on the value of ChoiceTable.selectMultiple</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.selectMultiple</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.correctChoice = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.requiredchoice">
  <h3>
    <a href="#choicetable.requiredchoice" name="choicetable.requiredchoice" class="pilcrow"></a>
ChoiceTable.requiredChoice
  </h3>
</div>
</div>
<div class="body">
<p>The number of required choices. Default 0</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.requiredChoice = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.attempts">
  <h3>
    <a href="#choicetable.attempts" name="choicetable.attempts" class="pilcrow"></a>
ChoiceTable.attempts
  </h3>
</div>
</div>
<div class="body">
<p>List of currentChoices at the moment of verifying correct answers</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.attempts = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.numberofclicks">
  <h3>
    <a href="#choicetable.numberofclicks" name="choicetable.numberofclicks" class="pilcrow"></a>
ChoiceTable.numberOfClicks
  </h3>
</div>
</div>
<div class="body">
<p>Total number of clicks on different choices</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.numberOfClicks = <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.selected">
  <h3>
    <a href="#choicetable.selected" name="choicetable.selected" class="pilcrow"></a>
ChoiceTable.selected
  </h3>
</div>
</div>
<div class="body">
<p>Currently selected cell/s</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.currentChoice</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.selected = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.currentchoice">
  <h3>
    <a href="#choicetable.currentchoice" name="choicetable.currentchoice" class="pilcrow"></a>
ChoiceTable.currentChoice
  </h3>
</div>
</div>
<div class="body">
<p>Choice/s associated with currently selected cell/s</p>
<p>The field is an array or number|string depending
on the value of ChoiceTable.selectMultiple</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.selectMultiple</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.selected</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.currentChoice = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.selectmultiple">
  <h3>
    <a href="#choicetable.selectmultiple" name="choicetable.selectmultiple" class="pilcrow"></a>
ChoiceTable.selectMultiple
  </h3>
</div>
</div>
<div class="body">
<p>If TRUE, it allows to select multiple cells</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.selectMultiple = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.shufflechoices">
  <h3>
    <a href="#choicetable.shufflechoices" name="choicetable.shufflechoices" class="pilcrow"></a>
ChoiceTable.shuffleChoices
  </h3>
</div>
</div>
<div class="body">
<p>If TRUE, choices are randomly assigned to cells</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.order</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.shuffleChoices = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.renderer">
  <h3>
    <a href="#choicetable.renderer" name="choicetable.renderer" class="pilcrow"></a>
ChoiceTable.renderer
  </h3>
</div>
</div>
<div class="body">
<p>A callback that renders the content of each cell</p>
<p>The callback must accept three parameters:</p>
<ul>
<li>a td HTML element,</li>
<li>a choice</li>
<li>the index of the choice element within the choices array</li>
</ul>
<p>and optionally return the <em>value</em> for the choice (otherwise
the order in the choices array is used as value).</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.renderer = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.orientation">
  <h3>
    <a href="#choicetable.orientation" name="choicetable.orientation" class="pilcrow"></a>
ChoiceTable.orientation
  </h3>
</div>
</div>
<div class="body">
<p>Orientation of display of choices: vertical ('V') or horizontal ('H')</p>
<p>Default orientation is horizontal.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.orientation = <span class="hljs-string">'H'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.group">
  <h3>
    <a href="#choicetable.group" name="choicetable.group" class="pilcrow"></a>
ChoiceTable.group
  </h3>
</div>
</div>
<div class="body">
<p>The name of the group where the table belongs, if any</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.group = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.grouporder">
  <h3>
    <a href="#choicetable.grouporder" name="choicetable.grouporder" class="pilcrow"></a>
ChoiceTable.groupOrder
  </h3>
</div>
</div>
<div class="body">
<p>The order of the choice table within the group</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.groupOrder = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.freetext">
  <h3>
    <a href="#choicetable.freetext" name="choicetable.freetext" class="pilcrow"></a>
ChoiceTable.freeText
  </h3>
</div>
</div>
<div class="body">
<p>If truthy, a textarea for free-text comment will be added</p>
<p>If 'string', the text will be added inside the textarea</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.freeText = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.textarea">
  <h3>
    <a href="#choicetable.textarea" name="choicetable.textarea" class="pilcrow"></a>
ChoiceTable.textarea
  </h3>
</div>
</div>
<div class="body">
<p>Textarea for free-text comment</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.textarea = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.separator">
  <h3>
    <a href="#choicetable.separator" name="choicetable.separator" class="pilcrow"></a>
ChoiceTable.separator
  </h3>
</div>
</div>
<div class="body">
<p>Symbol used to separate tokens in the id attribute of every cell</p>
<p>Default ChoiceTable.separator</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderChoice</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.separator = ChoiceTable.separator;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="choicetable-methods">
  <h2>
    <a href="#choicetable-methods" name="choicetable-methods" class="pilcrow"></a>
ChoiceTable methods
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.init">
  <h3>
    <a href="#choicetable.init" name="choicetable.init" class="pilcrow"></a>
ChoiceTable.init
  </h3>
</div>
</div>
<div class="body">
<p>Initializes the instance</p>
<p>Available options are:</p>
<ul>
<li>left: the content of the left (or top) cell</li>
<li>right: the content of the right (or bottom) cell</li>
<li>className: the className of the table (string, array), or false
to have none.</li>
<li>orientation: orientation of the table: vertical (v) or horizontal (h)</li>
<li>group: the name of the group (number or string), if any</li>
<li>groupOrder: the order of the table in the group, if any</li>
<li>onclick: a custom onclick listener function. Context is
<code>this</code> instance</li>
<li>mainText: a text to be displayed above the table</li>
<li>choices: the array of available choices. See
<code>ChoiceTable.renderChoice</code> for info about the format</li>
<li>correctChoice: the array|number|string of correct choices. See
<code>ChoiceTable.setCorrectChoice</code> for info about the format</li>
<li>selectMultiple: if TRUE multiple cells can be selected</li>
<li>shuffleChoices: if TRUE, choices are shuffled before being added
to the table</li>
<li>renderer: a function that will render the choices. See
ChoiceTable.renderer for info about the format</li>
<li>freeText: if TRUE, a textarea will be added under the table,
if 'string', the text will be added inside the textarea</li>
<li>timeFrom: The timestamp as recorded by <code>node.timer.setTimestamp</code>
or FALSE, to measure absolute time for current choice</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Configuration options
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> tmp, that;
        that = <span class="hljs-keyword">this</span>;

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.id) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.id is missing.'</span>);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p>Option orientation, default 'H'.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.orientation) {
            tmp = <span class="hljs-string">'H'</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> options.orientation) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.orientation must '</span> +
                                <span class="hljs-string">'be string, or undefined. Found: '</span> +
                                options.orientation);
        }
        <span class="hljs-keyword">else</span> {
            tmp = options.orientation.toLowerCase().trim();
            <span class="hljs-keyword">if</span> (tmp === <span class="hljs-string">'horizontal'</span> || tmp === <span class="hljs-string">'h'</span>) {
                tmp = <span class="hljs-string">'H'</span>;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (tmp === <span class="hljs-string">'vertical'</span> || tmp === <span class="hljs-string">'v'</span>) {
                tmp = <span class="hljs-string">'V'</span>;
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.init: options.orientation is '</span> +
                                <span class="hljs-string">'invalid: '</span> + tmp);
            }
        }
        <span class="hljs-keyword">this</span>.orientation = tmp;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>Option shuffleChoices, default false.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.shuffleChoices) tmp = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">else</span> tmp = !!options.shuffleChoices;
        <span class="hljs-keyword">this</span>.shuffleChoices = tmp;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>Option selectMultiple, default false.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.selectMultiple) tmp = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">else</span> tmp = !!options.selectMultiple;
        <span class="hljs-keyword">this</span>.selectMultiple = tmp;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<p>Option requiredChoice, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> options.requiredChoice) {
            <span class="hljs-keyword">this</span>.requiredChoice = options.requiredChoice;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'boolean'</span> === <span class="hljs-keyword">typeof</span> options.requiredChoice) {
            <span class="hljs-keyword">this</span>.requiredChoice = options.requiredChoice ? <span class="hljs-number">1</span> : <span class="hljs-number">0</span>;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.requiredChoice) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.requiredChoice '</span> +
                                <span class="hljs-string">'be number or boolean or undefined. Found: '</span> +
                                options.requiredChoice);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>Set the group, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.group ||
            <span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> options.group) {

            <span class="hljs-keyword">this</span>.group = options.group;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.group) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.group must '</span> +
                                <span class="hljs-string">'be string, number or undefined. Found: '</span> +
                                options.group);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>Set the groupOrder, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> options.groupOrder) {
            <span class="hljs-keyword">this</span>.groupOrder = options.groupOrder;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.groupOrder) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.groupOrder must '</span> +
                                <span class="hljs-string">'be number or undefined. Found: '</span> +
                                options.groupOrder);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<p>Set the onclick listener, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> options.onclick) {
            <span class="hljs-keyword">this</span>.listener = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                options.onclick.call(<span class="hljs-keyword">this</span>, e);
            };
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.onclick) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.onclick must '</span> +
                                <span class="hljs-string">'be function or undefined. Found: '</span> +
                                options.onclick);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>Set the mainText, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.mainText) {
            <span class="hljs-keyword">this</span>.mainText = options.mainText;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.mainText) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.mainText must '</span> +
                                <span class="hljs-string">'be string or undefined. Found: '</span> +
                                options.mainText);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>Set the timeFrom, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (options.timeFrom === <span class="hljs-literal">false</span> ||
            <span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.timeFrom) {

            <span class="hljs-keyword">this</span>.timeFrom = options.timeFrom;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.timeFrom) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.timeFrom must '</span> +
                                <span class="hljs-string">'be string, false, or undefined. Found: '</span> +
                                options.timeFrom);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>Set the separator, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.separator) {
            <span class="hljs-keyword">this</span>.separator = options.separator;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.separator) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.separator must '</span> +
                                <span class="hljs-string">'be string, or undefined. Found: '</span> +
                                options.separator);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>Conflict might be generated by id or seperator,
as specified by user.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.id.indexOf(options.separator) !== <span class="hljs-number">-1</span>) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.init: options.separator '</span> +
                            <span class="hljs-string">'cannot be a sequence of characters '</span> +
                            <span class="hljs-string">'included in the table id. Found: '</span> +
                            options.separator);
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.left ||
            <span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> options.left) {

            <span class="hljs-keyword">this</span>.left = <span class="hljs-string">''</span> + options.left;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(J.isNode(options.left) ||
                J.isElement(options.left)) {

            <span class="hljs-keyword">this</span>.left = options.left;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.left) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.left must '</span> +
                                <span class="hljs-string">'be string, number, an HTML Element or '</span> +
                                <span class="hljs-string">'undefined. Found: '</span> + options.left);
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.right ||
            <span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> options.right) {

            <span class="hljs-keyword">this</span>.right = <span class="hljs-string">''</span> + options.right;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(J.isNode(options.right) ||
                J.isElement(options.right)) {

            <span class="hljs-keyword">this</span>.right = options.right;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.right) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.right must '</span> +
                                <span class="hljs-string">'be string, number, an HTML Element or '</span> +
                                <span class="hljs-string">'undefined. Found: '</span> + options.right);
        }


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>Set the className, if not use default.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.className) {
            <span class="hljs-keyword">this</span>.className = ChoiceTable.className;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.className === <span class="hljs-literal">false</span> ||
                 <span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.className ||
                 J.isArray(options.className)) {

            <span class="hljs-keyword">this</span>.className = options.className;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.'</span> +
                                <span class="hljs-string">'className must be string, array, '</span> +
                                <span class="hljs-string">'or undefined. Found: '</span> + options.className);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>Set the renderer, if any.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'function'</span> === <span class="hljs-keyword">typeof</span> options.renderer) {
            <span class="hljs-keyword">this</span>.renderer = options.renderer;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.renderer) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.renderer must '</span> +
                                <span class="hljs-string">'be function or undefined. Found: '</span> +
                                options.renderer);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<p>After all configuration options are evaluated, add choices.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>Set table.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'object'</span> === <span class="hljs-keyword">typeof</span> options.table) {
            <span class="hljs-keyword">this</span>.table = options.table;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.table &amp;&amp;
                 <span class="hljs-literal">false</span> !== options.table) {

            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.init: options.table '</span> +
                                <span class="hljs-string">'must be object, false or undefined. '</span> +
                                <span class="hljs-string">'Found: '</span> + options.table);
        }

        <span class="hljs-keyword">this</span>.table = options.table;

        <span class="hljs-keyword">this</span>.freeText = <span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.freeText ?
            options.freeText : !!options.freeText;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<p>Add the choices.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.choices) {
            <span class="hljs-keyword">this</span>.setChoices(options.choices);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>Add the correct choices.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.correctChoice) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.requiredChoice) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.init: cannot specify both '</span> +
                                <span class="hljs-string">'options requiredChoice and correctChoice.'</span>);
            }
            <span class="hljs-keyword">this</span>.setCorrectChoice(options.correctChoice);
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.setchoices">
  <h3>
    <a href="#choicetable.setchoices" name="choicetable.setchoices" class="pilcrow"></a>
ChoiceTable.setChoices
  </h3>
</div>
</div>
<div class="body">
<p>Sets the available choices and optionally builds the table</p>
<p>If a table is defined, it will automatically append the choices
as TD cells. Otherwise, the choices will be built but not appended.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">choices</span>
<span class="dox_type">array</span>
<span>The array of choices
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.table</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.shuffleChoices</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.order</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.buildChoices</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.buildTableAndChoices</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.setChoices = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">choices</span>) </span>{
        <span class="hljs-keyword">var</span> len;
        <span class="hljs-keyword">if</span> (!J.isArray(choices)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.setChoices: choices '</span> +
                                <span class="hljs-string">'must be array.'</span>);
        }
        <span class="hljs-keyword">if</span> (!choices.length) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.setChoices: choices is empty array.'</span>);
        }
        <span class="hljs-keyword">this</span>.choices = choices;
        len = choices.length;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>Save the order in which the choices will be added.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.order = J.seq(<span class="hljs-number">0</span>, len<span class="hljs-number">-1</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.shuffleChoices) <span class="hljs-keyword">this</span>.order = J.shuffle(<span class="hljs-keyword">this</span>.order);
        <span class="hljs-keyword">this</span>.originalOrder = <span class="hljs-keyword">this</span>.order;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>Build the table and choices at once (faster).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.table) <span class="hljs-keyword">this</span>.buildTableAndChoices();
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>Or just build choices.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.buildChoices();
    };


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.buildchoices">
  <h3>
    <a href="#choicetable.buildchoices" name="choicetable.buildchoices" class="pilcrow"></a>
ChoiceTable.buildChoices
  </h3>
</div>
</div>
<div class="body">
<p>Render every choice and stores cell in <code>choicesCells</code> array</p>
<p>Left and right cells are also rendered, if specified.</p>
<p>Follows a shuffled order, if set</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.order</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderChoice</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderSpecial</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.buildChoices = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> i, len;
        i = <span class="hljs-number">-1</span>, len = <span class="hljs-keyword">this</span>.choices.length;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<p>Pre-allocate the choicesCells array.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.choicesCells = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len);
        <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
            <span class="hljs-keyword">this</span>.renderChoice(<span class="hljs-keyword">this</span>.choices[<span class="hljs-keyword">this</span>.order[i]], i);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.left) <span class="hljs-keyword">this</span>.renderSpecial(<span class="hljs-string">'left'</span>, <span class="hljs-keyword">this</span>.left);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.right) <span class="hljs-keyword">this</span>.renderSpecial(<span class="hljs-string">'right'</span>, <span class="hljs-keyword">this</span>.right);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.buildtable">
  <h3>
    <a href="#choicetable.buildtable" name="choicetable.buildtable" class="pilcrow"></a>
ChoiceTable.buildTable
  </h3>
</div>
</div>
<div class="body">
<p>Builds the table of clickable choices and enables it</p>
<p>Must be called after choices have been set already.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.setChoices</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.order</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderChoice</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.orientation</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.buildTable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> i, len, tr, H;

        len = <span class="hljs-keyword">this</span>.choicesCells.length;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<p>Start adding tr/s and tds based on the orientation.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        i = <span class="hljs-number">-1</span>, H = <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">'H'</span>;

        <span class="hljs-keyword">if</span> (H) {
            tr = createTR(<span class="hljs-keyword">this</span>, <span class="hljs-string">'main'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<p>Add horizontal choices title.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.leftCell) tr.appendChild(<span class="hljs-keyword">this</span>.leftCell);
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<p>Main loop.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
            <span class="hljs-keyword">if</span> (!H) {
                tr = createTR(<span class="hljs-keyword">this</span>, <span class="hljs-string">'left'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<p>Add vertical choices title.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.leftCell) {
                    tr.appendChild(<span class="hljs-keyword">this</span>.leftCell);
                    tr = createTR(<span class="hljs-keyword">this</span>, i);
                }
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<p>Clickable cell.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            tr.appendChild(<span class="hljs-keyword">this</span>.choicesCells[i]);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rightCell) {
            <span class="hljs-keyword">if</span> (!H) tr = createTR(<span class="hljs-keyword">this</span>, <span class="hljs-string">'right'</span>);
            tr.appendChild(<span class="hljs-keyword">this</span>.rightCell);
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<p>Enable onclick listener.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.enable();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.buildtableandchoices">
  <h3>
    <a href="#choicetable.buildtableandchoices" name="choicetable.buildtableandchoices" class="pilcrow"></a>
ChoiceTable.buildTableAndChoices
  </h3>
</div>
</div>
<div class="body">
<p>Builds the table of clickable choices</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.choices</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.order</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderChoice</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.orientation</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.buildTableAndChoices = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> i, len, tr, td, H;

        len = <span class="hljs-keyword">this</span>.choices.length;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<p>Pre-allocate the choicesCells array.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.choicesCells = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<p>Start adding tr/s and tds based on the orientation.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        i = <span class="hljs-number">-1</span>, H = <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">'H'</span>;

        <span class="hljs-keyword">if</span> (H) {
            tr = createTR(<span class="hljs-keyword">this</span>, <span class="hljs-string">'main'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<p>Add horizontal choices left.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.left) {
                td = <span class="hljs-keyword">this</span>.renderSpecial(<span class="hljs-string">'left'</span>, <span class="hljs-keyword">this</span>.left);
                tr.appendChild(td);
            }
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<p>Main loop.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
            <span class="hljs-keyword">if</span> (!H) {
                tr = createTR(<span class="hljs-keyword">this</span>, <span class="hljs-string">'left'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<p>Add vertical choices left.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                <span class="hljs-keyword">if</span> (i === <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-keyword">this</span>.left) {
                    td = <span class="hljs-keyword">this</span>.renderSpecial(<span class="hljs-string">'left'</span>, <span class="hljs-keyword">this</span>.left);
                    tr.appendChild(td);
                    tr = createTR(<span class="hljs-keyword">this</span>, i);
                }
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<p>Clickable cell.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            td = <span class="hljs-keyword">this</span>.renderChoice(<span class="hljs-keyword">this</span>.choices[<span class="hljs-keyword">this</span>.order[i]], i);
            tr.appendChild(td);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.right) {
            <span class="hljs-keyword">if</span> (!H) tr = createTR(<span class="hljs-keyword">this</span>, <span class="hljs-string">'right'</span>);
            td = <span class="hljs-keyword">this</span>.renderSpecial(<span class="hljs-string">'right'</span>, <span class="hljs-keyword">this</span>.right);
            tr.appendChild(td);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<p>Enable onclick listener.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.enable();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.renderspecial">
  <h3>
    <a href="#choicetable.renderspecial" name="choicetable.renderspecial" class="pilcrow"></a>
ChoiceTable.renderSpecial
  </h3>
</div>
</div>
<div class="body">
<p>Renders a non-choice element into a cell of the table (e.g. left/right)</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">type</span>
<span class="dox_type">string</span>
<span>The type of special cell ('left' or 'right').
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">special</span>
<span class="dox_type">mixed</span>
<span>The special element. It must be string or number,   or array where the first element is the 'value' (incorporated in the
<code>id</code> field) and the second the text to display as choice.
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">HTMLElement</span>
<span>td The newly created cell of the table
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.left</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.right</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.renderSpecial = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">type, special</span>) </span>{
        <span class="hljs-keyword">var</span> td, className;
        td = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'td'</span>);
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> special) td.innerHTML = special;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<p>HTML element (checked before).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">else</span> td.appendChild(special);
        <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'left'</span>) {
            className = <span class="hljs-keyword">this</span>.className ? <span class="hljs-keyword">this</span>.className + <span class="hljs-string">'-left'</span> : <span class="hljs-string">'left'</span>;
            <span class="hljs-keyword">this</span>.leftCell = td;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (type === <span class="hljs-string">'right'</span>) {
            className = <span class="hljs-keyword">this</span>.className ? <span class="hljs-keyword">this</span>.className + <span class="hljs-string">'-right'</span> : <span class="hljs-string">'right'</span>;
            <span class="hljs-keyword">this</span>.rightCell = td;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.renderSpecial: unknown type: '</span> + type);
        }
        td.className = className;
        td.id = <span class="hljs-keyword">this</span>.id + <span class="hljs-keyword">this</span>.separator + <span class="hljs-string">'special-cell-'</span> + type;
        <span class="hljs-keyword">return</span> td;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.renderchoice">
  <h3>
    <a href="#choicetable.renderchoice" name="choicetable.renderchoice" class="pilcrow"></a>
ChoiceTable.renderChoice
  </h3>
</div>
</div>
<div class="body">
<p>Transforms a choice element into a cell of the table</p>
<p>A reference to the cell is saved in <code>choicesCells</code>.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">choice</span>
<span class="dox_type">mixed</span>
<span>The choice element. It must be string or number,   or array where the first element is the 'value' (incorporated in the
<code>id</code> field) and the second the text to display as choice. If a
renderer function is defined there are no restriction on the
format of choice
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">idx</span>
<span class="dox_type">number</span>
<span>The position of the choice within the choice array
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">HTMLElement</span>
<span>td The newly created cell of the table
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.renderer</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.separator</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.choicesCells</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.renderChoice = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">choice, idx</span>) </span>{
        <span class="hljs-keyword">var</span> td, value;
        td = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'td'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<p>Use custom renderer.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.renderer) {
            value = <span class="hljs-keyword">this</span>.renderer(td, choice, idx);
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> value) value = idx;
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<p>Or use standard format.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (J.isArray(choice)) {
                value = choice[<span class="hljs-number">0</span>];
                choice = choice[<span class="hljs-number">1</span>];
            }
            <span class="hljs-keyword">else</span> {
                value = <span class="hljs-keyword">this</span>.shuffleChoices ? <span class="hljs-keyword">this</span>.order[idx] : idx;
            }

            <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> choice || <span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> choice) {
                td.innerHTML = choice;
            }
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (J.isElement(choice) || J.isNode(choice)) {
                td.appendChild(choice);
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.renderChoice: invalid choice: '</span> +
                                choice);
            }
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<p>Map a value to the index.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.choicesValues[value]) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.renderChoice: value already '</span> +
                            <span class="hljs-string">'in use: '</span> + value);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<p>Add the id if not added already by the renderer function.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!td.id || td.id === <span class="hljs-string">''</span>) {
            td.id = <span class="hljs-keyword">this</span>.id + <span class="hljs-keyword">this</span>.separator + value;
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<p>All fine, updates global variables.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.choicesValues[value] = idx;
        <span class="hljs-keyword">this</span>.choicesCells[idx] = td;
        <span class="hljs-keyword">this</span>.choicesIds[td.id] = td;

        <span class="hljs-keyword">return</span> td;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.setcorrectchoice">
  <h3>
    <a href="#choicetable.setcorrectchoice" name="choicetable.setcorrectchoice" class="pilcrow"></a>
ChoiceTable.setCorrectChoice
  </h3>
</div>
</div>
<div class="body">
<p>Set the correct choice/s</p>
<p>Correct choice/s are always stored as 'strings', or not number
because then they are compared against the valued saved in
the <code>id</code> field of the cell</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">If</span>
<span class="dox_type">number</span>
<span class="dox_type">string</span>
<span class="dox_type">array</span>
<span><code>selectMultiple</code> is set, param must   be an array, otherwise a string or a number. Each correct choice
must have been already defined as choice (value)
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.setChoices</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">checkCorrectChoiceParam</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.setCorrectChoice = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">choice</span>) </span>{
        <span class="hljs-keyword">var</span> i, len;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple) {
            choice = checkCorrectChoiceParam(<span class="hljs-keyword">this</span>, choice);
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (J.isArray(choice) &amp;&amp; choice.length) {
                i = <span class="hljs-number">-1</span>, len = choice.length;
                <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
                    choice[i] = checkCorrectChoiceParam(<span class="hljs-keyword">this</span>, choice[i]);
                }
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.setCorrectChoice: choices '</span> +
                                    <span class="hljs-string">'must be non-empty array.'</span>);
            }
        }
        <span class="hljs-keyword">this</span>.correctChoice = choice;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.append">
  <h3>
    <a href="#choicetable.append" name="choicetable.append" class="pilcrow"></a>
ChoiceTable.append
  </h3>
</div>
</div>
<div class="body">
<p>Implements Widget.append</p>
<p>Checks that id is unique.</p>
<p>Appends (all optional):</p>
<ul>
<li>mainText: a question or statement introducing the choices</li>
<li>table: the table containing the choices</li>
<li>freeText: a textarea for comments</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Widget.append</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.append = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> tmp;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<p>Id must be unique.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (W.getElementById(<span class="hljs-keyword">this</span>.id)) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.append: id is not '</span> +
                            <span class="hljs-string">'unique: '</span> + <span class="hljs-keyword">this</span>.id);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<p>MainText.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.mainText) {
            <span class="hljs-keyword">this</span>.spanMainText = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'span'</span>);
            <span class="hljs-keyword">this</span>.spanMainText.className = <span class="hljs-keyword">this</span>.className ?
                ChoiceTable.className + <span class="hljs-string">'-maintext'</span> : <span class="hljs-string">'maintext'</span>;
            <span class="hljs-keyword">this</span>.spanMainText.innerHTML = <span class="hljs-keyword">this</span>.mainText;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<p>Append mainText.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.spanMainText);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<p>Create/set table.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.table !== <span class="hljs-literal">false</span>) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<p>Create table, if it was not passed as object before.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.table) {
                <span class="hljs-keyword">this</span>.table = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'table'</span>);
                <span class="hljs-keyword">this</span>.buildTable();
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<p>Set table id.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">this</span>.table.id = <span class="hljs-keyword">this</span>.id;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.className) J.addClass(<span class="hljs-keyword">this</span>.table, <span class="hljs-keyword">this</span>.className);
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.table.className = <span class="hljs-string">''</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<p>Append table.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.table);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<p>Creates a free-text textarea, possibly with placeholder text.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.freeText) {
            <span class="hljs-keyword">this</span>.textarea = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'textarea'</span>);
            <span class="hljs-keyword">this</span>.textarea.id = <span class="hljs-keyword">this</span>.id + <span class="hljs-string">'_text'</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.freeText) {
                <span class="hljs-keyword">this</span>.textarea.placeholder = <span class="hljs-keyword">this</span>.freeText;
            }
            tmp = <span class="hljs-keyword">this</span>.className ? <span class="hljs-keyword">this</span>.className + <span class="hljs-string">'-freetext'</span> : <span class="hljs-string">'freetext'</span>;
            <span class="hljs-keyword">this</span>.textarea.className = tmp;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<p>Append textarea.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.textarea);
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.listeners">
  <h3>
    <a href="#choicetable.listeners" name="choicetable.listeners" class="pilcrow"></a>
ChoiceTable.listeners
  </h3>
</div>
</div>
<div class="body">
<p>Implements Widget.listeners</p>
<p>Adds two listeners two disable/enable the widget on events:
INPUT_DISABLE, INPUT_ENABLE</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Widget.listeners</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
        node.on(<span class="hljs-string">'INPUT_DISABLE'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            that.disable();
        });
        node.on(<span class="hljs-string">'INPUT_ENABLE'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            that.enable();
        });
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.disable">
  <h3>
    <a href="#choicetable.disable" name="choicetable.disable" class="pilcrow"></a>
ChoiceTable.disable
  </h3>
</div>
</div>
<div class="body">
<p>Disables clicking on the table and removes CSS 'clicklable' class</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.disable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.disabled === <span class="hljs-literal">true</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.disabled = <span class="hljs-literal">true</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.table) {
            J.removeClass(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">'clickable'</span>);
            <span class="hljs-keyword">this</span>.table.removeEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>.listener);
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.enable">
  <h3>
    <a href="#choicetable.enable" name="choicetable.enable" class="pilcrow"></a>
ChoiceTable.enable
  </h3>
</div>
</div>
<div class="body">
<p>Enables clicking on the table and adds CSS 'clicklable' class</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">function</span>
<span>cb The event listener function
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.enable = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.disabled === <span class="hljs-literal">false</span>) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.table) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.enable: table not defined.'</span>);
        }
        <span class="hljs-keyword">this</span>.disabled = <span class="hljs-literal">false</span>;
        J.addClass(<span class="hljs-keyword">this</span>.table, <span class="hljs-string">'clickable'</span>);
        <span class="hljs-keyword">this</span>.table.addEventListener(<span class="hljs-string">'click'</span>, <span class="hljs-keyword">this</span>.listener);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.verifychoice">
  <h3>
    <a href="#choicetable.verifychoice" name="choicetable.verifychoice" class="pilcrow"></a>
ChoiceTable.verifyChoice
  </h3>
</div>
</div>
<div class="body">
<p>Compares the current choice/s with the correct one/s</p>
<p>Depending on current settings, there are two modes of verifying
choices:</p>
<ul>
<li>requiredChoice: there must be at least N choices selected</li>
<li>correctChoice:  the choices are compared against correct ones.</li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">markAttempt</span>
<span class="dox_type">boolean</span>
<span>Optional. If TRUE, the value of   current choice is added to the attempts array. Default: TRUE
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">boolean</span>
<span>TRUE if current choice is correct,   FALSE if it is not correct, or NULL if no correct choice
was set
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.attempts</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.setCorrectChoice</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.verifyChoice = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">markAttempt</span>) </span>{
        <span class="hljs-keyword">var</span> i, len, j, lenJ, c, clone, found;
        <span class="hljs-keyword">var</span> correctChoice;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108"></a>
</div>
<p>Check the number of choices.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.requiredChoice !== <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple) <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentChoice !== <span class="hljs-literal">null</span>;
            <span class="hljs-keyword">else</span> <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentChoice.length &gt;= <span class="hljs-keyword">this</span>.requiredChoice;
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109"></a>
</div>
<p>If no correct choice is set return null.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.correctChoice) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110"></a>
</div>
<p>Mark attempt by default.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        markAttempt = <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> markAttempt ? <span class="hljs-literal">true</span> : markAttempt;
        <span class="hljs-keyword">if</span> (markAttempt) <span class="hljs-keyword">this</span>.attempts.push(<span class="hljs-keyword">this</span>.currentChoice);
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentChoice === <span class="hljs-keyword">this</span>.correctChoice;
        }
        <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111"></a>
</div>
<p>Make it an array (can be a string).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            correctChoice = J.isArray(<span class="hljs-keyword">this</span>.correctChoice) ?
                <span class="hljs-keyword">this</span>.correctChoice : [<span class="hljs-keyword">this</span>.correctChoice];

            len = correctChoice.length;
            lenJ = <span class="hljs-keyword">this</span>.currentChoice.length;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112"></a>
</div>
<p>Quick check.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (len !== lenJ) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113"></a>
</div>
<p>Check every item.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            i = <span class="hljs-number">-1</span>;
            clone = <span class="hljs-keyword">this</span>.currentChoice.slice(<span class="hljs-number">0</span>);
            <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
                found = <span class="hljs-literal">false</span>;
                c = correctChoices[i];
                j = <span class="hljs-number">-1</span>;
                <span class="hljs-keyword">for</span> ( ; ++j &lt; lenJ ; ) {
                    <span class="hljs-keyword">if</span> (clone[j] === c) {
                        found = <span class="hljs-literal">true</span>;
                        <span class="hljs-keyword">break</span>;
                    }
                }
                <span class="hljs-keyword">if</span> (!found) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.setcurrentchoice">
  <h3>
    <a href="#choicetable.setcurrentchoice" name="choicetable.setcurrentchoice" class="pilcrow"></a>
ChoiceTable.setCurrentChoice
  </h3>
</div>
</div>
<div class="body">
<p>Marks a choice as current</p>
<p>If <code>ChoiceTable.selectMultiple</code> is set multiple choices can be current.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">The</span>
<span class="dox_type">number</span>
<span class="dox_type">string</span>
<span>choice to mark as current
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.currentChoice</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.selectMultiple</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.setCurrentChoice = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">choice</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple) <span class="hljs-keyword">this</span>.currentChoice = choice;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.currentChoice.push(choice);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.unsetcurrentchoice">
  <h3>
    <a href="#choicetable.unsetcurrentchoice" name="choicetable.unsetcurrentchoice" class="pilcrow"></a>
ChoiceTable.unsetCurrentChoice
  </h3>
</div>
</div>
<div class="body">
<p>Deletes the value of currentChoice</p>
<p>If <code>ChoiceTable.selectMultiple</code> is activated, then it is
possible to select the choice to unset.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">Optional.</span>
<span class="dox_type">number</span>
<span class="dox_type">string</span>
<span>The choice to delete from   currentChoice when multiple selections are allowed
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.currentChoice</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.selectMultiple</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.unsetCurrentChoice = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">choice</span>) </span>{
        <span class="hljs-keyword">var</span> i, len;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple || <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> choice) {
            <span class="hljs-keyword">this</span>.currentChoice = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> choice &amp;&amp; <span class="hljs-string">'number'</span> !== <span class="hljs-keyword">typeof</span> choice) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.unsetCurrentChoice: choice '</span> +
                                    <span class="hljs-string">'must be string, number or undefined.'</span>);
            }
            i = <span class="hljs-number">-1</span>, len = <span class="hljs-keyword">this</span>.currentChoice.length;
            <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentChoice[i] === choice) {
                    <span class="hljs-keyword">this</span>.currentChoice.splice(i,<span class="hljs-number">1</span>);
                    <span class="hljs-keyword">break</span>;
                }
            }
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.ischoicecurrent">
  <h3>
    <a href="#choicetable.ischoicecurrent" name="choicetable.ischoicecurrent" class="pilcrow"></a>
ChoiceTable.isChoiceCurrent
  </h3>
</div>
</div>
<div class="body">
<p>Returns TRUE if a choice is currently selected</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">The</span>
<span class="dox_type">number</span>
<span class="dox_type">string</span>
<span>choice to check
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">boolean</span>
<span>TRUE, if the choice is currently selected
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.isChoiceCurrent = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">choice</span>) </span>{
        <span class="hljs-keyword">var</span> i, len;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> choice) {
            choice = <span class="hljs-string">''</span> + choice;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> choice) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.isChoiceCurrent: choice '</span> +
                                <span class="hljs-string">'must be string or number.'</span>);
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple) {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.currentChoice === choice;
        }
        <span class="hljs-keyword">else</span> {
            i = <span class="hljs-number">-1</span>, len = <span class="hljs-keyword">this</span>.currentChoice.length;
            <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.currentChoice[i] === choice) {
                    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
                }
            }
            <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.highlight">
  <h3>
    <a href="#choicetable.highlight" name="choicetable.highlight" class="pilcrow"></a>
ChoiceTable.highlight
  </h3>
</div>
</div>
<div class="body">
<p>Highlights the choice table</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">The</span>
<span class="dox_type">string</span>
<span>style for the table's border.   Default '3px solid red'
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.highlighted</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.highlight = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">border</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.table) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (border &amp;&amp; <span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> border) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.highlight: border must be '</span> +
                                <span class="hljs-string">'string or undefined. Found: '</span> + border);
        }
        <span class="hljs-keyword">this</span>.table.style.border = border || <span class="hljs-string">'3px solid red'</span>;
        <span class="hljs-keyword">this</span>.highlighted = <span class="hljs-literal">true</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.unhighlight">
  <h3>
    <a href="#choicetable.unhighlight" name="choicetable.unhighlight" class="pilcrow"></a>
ChoiceTable.unhighlight
  </h3>
</div>
</div>
<div class="body">
<p>Removes highlight from the choice table</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.highlighted</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.unhighlight = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.table) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.table.style.border = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.highlighted = <span class="hljs-literal">false</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.getvalues">
  <h3>
    <a href="#choicetable.getvalues" name="choicetable.getvalues" class="pilcrow"></a>
ChoiceTable.getValues
  </h3>
</div>
</div>
<div class="body">
<p>Returns the values for current selection and other paradata</p>
<p>Paradata that is not set or recorded will be omitted</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">object</span>
<span>Optional. Configures the return value.   Available optionts:
<ul>
<li>markAttempt: If TRUE, getting the value counts as an attempt
to find the correct answer. Default: TRUE.</li>
<li>highlight:   If TRUE, if current value is not the correct
value, widget will be highlighted. Default: FALSE.</li>
<li>reset:       If TRUTHY and a correct choice is selected (or not
specified), then it resets the state of the widgets before
returning it. Default: FALSE.</li>
</ul>
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">object</span>
<span>Object containing the choice and paradata
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.verifyChoice</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.reset</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.getValues = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts</span>) </span>{
        <span class="hljs-keyword">var</span> obj, resetOpts;
        opts = opts || {};
        obj = {
            <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.id,
            <span class="hljs-attr">choice</span>: opts.reset ?
                <span class="hljs-keyword">this</span>.currentChoice: J.clone(<span class="hljs-keyword">this</span>.currentChoice),
            <span class="hljs-attr">time</span>: <span class="hljs-keyword">this</span>.timeCurrentChoice,
            <span class="hljs-attr">nClicks</span>: <span class="hljs-keyword">this</span>.numberOfClicks
        };
        <span class="hljs-keyword">if</span> (opts.processChoice) {
            obj.choice = opts.processChoice.call(<span class="hljs-keyword">this</span>, obj.choice);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.shuffleChoices) {
            obj.originalOrder = <span class="hljs-keyword">this</span>.originalOrder;
            obj.order = <span class="hljs-keyword">this</span>.order;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.group === <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.group) {
            obj.group = <span class="hljs-keyword">this</span>.group;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.groupOrder === <span class="hljs-number">0</span> || <span class="hljs-keyword">this</span>.groupOrder) {
            obj.groupOrder = <span class="hljs-keyword">this</span>.groupOrder;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-literal">null</span> !== <span class="hljs-keyword">this</span>.correctChoice || <span class="hljs-literal">null</span> !== <span class="hljs-keyword">this</span>.requiredChoice) {
            obj.isCorrect = <span class="hljs-keyword">this</span>.verifyChoice(opts.markAttempt);
            obj.attempts = <span class="hljs-keyword">this</span>.attempts;
            <span class="hljs-keyword">if</span> (!obj.isCorrect &amp;&amp; opts.highlight) <span class="hljs-keyword">this</span>.highlight();
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.textarea) obj.freetext = <span class="hljs-keyword">this</span>.textarea.value;
        <span class="hljs-keyword">if</span> (obj.isCorrect !== <span class="hljs-literal">false</span> &amp;&amp; opts.reset) {
            resetOpts = <span class="hljs-string">'object'</span> !== <span class="hljs-keyword">typeof</span> opts.reset ? {} : opts.reset;
            <span class="hljs-keyword">this</span>.reset(resetOpts);
        }
        <span class="hljs-keyword">return</span> obj;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.setvalues">
  <h3>
    <a href="#choicetable.setvalues" name="choicetable.setvalues" class="pilcrow"></a>
ChoiceTable.setValues
  </h3>
</div>
</div>
<div class="body">
<p>Sets values in the choice table as specified by the options</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Options specifying how to set   the values. If no parameter is specified, random values will
be set.
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.setValues = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> choice, correctChoice, cell;
        <span class="hljs-keyword">var</span> i, len, j, lenJ;

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.choices || !<span class="hljs-keyword">this</span>.choices.length) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'ChoiceTable.setValues: no choices found.'</span>);
        }
        options = options || {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121"></a>
</div>
<p>TODO: allow it to set it visually or just in the background.
Use options.visual.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122"></a>
</div>
<p>TODO: allow it to set random or fixed values, or correct values</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.choicesCells || !<span class="hljs-keyword">this</span>.choicesCells.length) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Choicetable.setValues: table was not '</span> +
                            <span class="hljs-string">'built yet.'</span>);
        }

        <span class="hljs-keyword">if</span> (options.correct) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123"></a>
</div>
<p>Value this.correctChoice can be string or array.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.correctChoice || !<span class="hljs-keyword">this</span>.correctChoice.length) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'Choicetable.setValues: "correct" is set, '</span> +
                               <span class="hljs-string">'but no correct choice is found.'</span>);
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124"></a>
</div>
<p>Make it an array (can be a string).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            correctChoice = J.isArray(<span class="hljs-keyword">this</span>.correctChoice) ?
                <span class="hljs-keyword">this</span>.correctChoice : [<span class="hljs-keyword">this</span>.correctChoice];

            i = <span class="hljs-number">-1</span>, len = correctChoice.length;
            <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
                choice = <span class="hljs-built_in">parseInt</span>(correctChoice[i], <span class="hljs-number">10</span>);
                <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.shuffleChoices) {
                    j = <span class="hljs-number">-1</span>, lenJ = <span class="hljs-keyword">this</span>.order.length;
                    <span class="hljs-keyword">for</span> ( ; ++j &lt; lenJ ; ) {
                        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.order[j] === choice) {
                            choice = j;
                            <span class="hljs-keyword">break</span>;
                        }
                    }
                }

                <span class="hljs-keyword">this</span>.choicesCells[choice].click();
            }
            <span class="hljs-keyword">return</span>;
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125"></a>
</div>
<p>How many random choices?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple) len = <span class="hljs-number">1</span>;
        <span class="hljs-keyword">else</span> len = J.randomInt(<span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.choicesCells.length);

        i = <span class="hljs-number">-1</span>;
        <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
            choice = J.randomInt(<span class="hljs-number">0</span>, <span class="hljs-keyword">this</span>.choicesCells.length)<span class="hljs-number">-1</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126"></a>
</div>
<p>Do not click it again if it is already selected.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isChoiceCurrent(choice)) {
                <span class="hljs-keyword">this</span>.choicesCells[choice].click();
            }
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127"></a>
</div>
<p>Make a random comment.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.textarea) <span class="hljs-keyword">this</span>.textarea.value = J.randomString(<span class="hljs-number">100</span>, <span class="hljs-string">'!Aa0'</span>);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.reset">
  <h3>
    <a href="#choicetable.reset" name="choicetable.reset" class="pilcrow"></a>
ChoiceTable.reset
  </h3>
</div>
</div>
<div class="body">
<p>Resets current selection and collected paradata</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Available options:    - shuffleChoices: If TRUE, choices are shuffled. Default: FALSE
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.reset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> i, len;

        options = options || {};

        <span class="hljs-keyword">this</span>.attempts = [];
        <span class="hljs-keyword">this</span>.numberOfClicks = <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.currentChoice = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.timeCurrentChoice = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.selected) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.selectMultiple) {
                J.removeClass(<span class="hljs-keyword">this</span>.selected, <span class="hljs-string">'selected'</span>);
            }
            <span class="hljs-keyword">else</span> {
                i = <span class="hljs-number">-1</span>, len = <span class="hljs-keyword">this</span>.selected.length;
                <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
                    J.removeClass(<span class="hljs-keyword">this</span>.selected[i], <span class="hljs-string">'selected'</span>);
                }
            }
            <span class="hljs-keyword">this</span>.selected = <span class="hljs-literal">null</span>;
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.textArea) <span class="hljs-keyword">this</span>.textArea.value = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isHighlighted()) <span class="hljs-keyword">this</span>.unhighlight();

        <span class="hljs-keyword">if</span> (options.shuffleChoices) <span class="hljs-keyword">this</span>.shuffle();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.shuffle">
  <h3>
    <a href="#choicetable.shuffle" name="choicetable.shuffle" class="pilcrow"></a>
ChoiceTable.shuffle
  </h3>
</div>
</div>
<div class="body">
<p>Shuffles the order of the choices</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChoiceTable.prototype.shuffle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> order, H;
        <span class="hljs-keyword">var</span> i, len, cell, choice;
        <span class="hljs-keyword">var</span> choicesValues, choicesCells;
        <span class="hljs-keyword">var</span> parentTR;

        H = <span class="hljs-keyword">this</span>.orientation === <span class="hljs-string">'H'</span>;
        order = J.shuffle(<span class="hljs-keyword">this</span>.order);
        i = <span class="hljs-number">-1</span>, len = order.length;
        choicesValues = {};
        choicesCells = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Array</span>(len);

        <span class="hljs-keyword">for</span> ( ; ++i &lt; len ; ) {
            choice = order[i];
            cell = <span class="hljs-keyword">this</span>.choicesCells[<span class="hljs-keyword">this</span>.choicesValues[choice]];
            choicesCells[i] = cell;
            choicesValues[choice] = i;
            <span class="hljs-keyword">if</span> (H) {
                <span class="hljs-keyword">this</span>.trs[<span class="hljs-number">0</span>].appendChild(cell);
            }
            <span class="hljs-keyword">else</span> {
                parentTR = cell.parentElement || cell.parentNode;
                <span class="hljs-keyword">this</span>.table.appendChild(parentTR);
            }
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.rightCell) {
            <span class="hljs-keyword">if</span> (H) {
                <span class="hljs-keyword">this</span>.trs[<span class="hljs-number">0</span>].appendChild(<span class="hljs-keyword">this</span>.rightCell);
            }
            <span class="hljs-keyword">else</span> {
                parentTR = <span class="hljs-keyword">this</span>.rightCell.parentElement ||
                    <span class="hljs-keyword">this</span>.rightCell.parentNode;
                <span class="hljs-keyword">this</span>.table.appendChild(parentTR);
            }
        }

        <span class="hljs-keyword">this</span>.order = order;
        <span class="hljs-keyword">this</span>.choicesCells = choicesCells;
        <span class="hljs-keyword">this</span>.choicesValues = choicesValues;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="helper-methods">
  <h2>
    <a href="#helper-methods" name="helper-methods" class="pilcrow"></a>
Helper methods.
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="checkcorrectchoiceparam">
  <h3>
    <a href="#checkcorrectchoiceparam" name="checkcorrectchoiceparam" class="pilcrow"></a>
checkCorrectChoiceParam
  </h3>
</div>
</div>
<div class="body">
<p>Checks the input parameters of method ChoiceTable.setCorrectChoice</p>
<p>The function transforms numbers into string, because then the checking
is done with strings (they are serialized in the id property of tds).</p>
<p>If <code>ChoiceTable.selectMultiple</code> is set, the function checks each
value of the array separately.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">that</span>
<span class="dox_type">ChoiceTable</span>
<span>This instance
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">An</span>
<span class="dox_type">string</span>
<span class="dox_type">number</span>
<span>already existing value of a choice
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">string</span>
<span>The checked choice
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">checkCorrectChoiceParam</span>(<span class="hljs-params">that, choice</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'number'</span> === <span class="hljs-keyword">typeof</span> choice) choice = <span class="hljs-string">''</span> + choice;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> choice) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.setCorrectChoice: each choice '</span> +
                                <span class="hljs-string">'must be number or string. Found: '</span> + choice);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> that.choicesValues[choice]) {

            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChoiceTable.setCorrectChoice: choice '</span> +
                                <span class="hljs-string">'not found: '</span> + choice);
        }
        <span class="hljs-keyword">return</span> choice;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="createtr">
  <h3>
    <a href="#createtr" name="createtr" class="pilcrow"></a>
createTR
  </h3>
</div>
</div>
<div class="body">
<p>Creates and append a new TR element</p>
<p>Adds the the <code>id</code> attribute formatted as:
'tr' + separator + widget_id</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">that</span>
<span class="dox_type">ChoiceTable</span>
<span>This instance
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">HTMLElement</span>
<span>Thew newly created TR element
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChoiceTable.tr</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createTR</span>(<span class="hljs-params">that, trid</span>) </span>{
        <span class="hljs-keyword">var</span> tr;
        tr = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'tr'</span>);
        tr.id = <span class="hljs-string">'tr'</span> + that.separator + that.id;
        that.table.appendChild(tr);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133"></a>
</div>
<p>Store reference.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        that.trs.push(tr);
        <span class="hljs-keyword">return</span> tr;
    }

})(node);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
