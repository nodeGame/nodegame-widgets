<!DOCTYPE html>
<html>
<head>
  <title>ChernoffFaces.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "widgets/ChernoffFaces.js";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#chernofffaces">ChernoffFaces</a>
      </div>

      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>

      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>

      <div class="heading h2">
        <a href="#chernofffaces-constructor">ChernoffFaces constructor</a>
      </div>

      <div class="heading h2">
        <a href="#public-properties">Public Properties</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.options">ChernoffFaces.options</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.table">ChernoffFaces.table</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.sc">ChernoffFaces.sc</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.fp">ChernoffFaces.fp</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.canvas">ChernoffFaces.canvas</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.changes">ChernoffFaces.changes</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.onchange">ChernoffFaces.onChange</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.onchangecb">ChernoffFaces.onChangeCb</a>
      </div>

      <div class="heading h3">
        <a href="#choicetable.timefrom">ChoiceTable.timeFrom</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.features">ChernoffFaces.features</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.init">ChernoffFaces.init</a>
      </div>

      <div class="heading h2">
        <a href="#chernofffaces.getcanvas">ChernoffFaces.getCanvas</a>
      </div>

      <div class="heading h2">
        <a href="#chernofffaces.buildhtml">ChernoffFaces.buildHTML</a>
      </div>

      <div class="heading h2">
        <a href="#chernofffaces.buildcanvas">ChernoffFaces.buildCanvas</a>
      </div>

      <div class="heading h2">
        <a href="#chernofffaces.append">ChernoffFaces.append</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.draw">ChernoffFaces.draw</a>
      </div>

      <div class="heading h3">
        <a href="#chernofffaces.randomize">ChernoffFaces.randomize</a>
      </div>

      <div class="heading h1">
        <a href="#facepainter">FacePainter</a>
      </div>

      <div class="heading h3">
        <a href="#facepainter.canvas">FacePainter.canvas</a>
      </div>

      <div class="heading h3">
        <a href="#facepainter.scalex">FacePainter.scaleX</a>
      </div>

      <div class="heading h3">
        <a href="#facepainter.scalex-1">FacePainter.scaleX</a>
      </div>

      <div class="heading h3">
        <a href="#facepainter.face">FacePainter.face</a>
      </div>

      <div class="heading h2">
        <a href="#methods">Methods</a>
      </div>

      <div class="heading h3">
        <a href="#facepainter.draw">FacePainter.draw</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces">
  <h1>
    <a href="#chernofffaces" name="chernofffaces" class="pilcrow"></a>
ChernoffFaces
  </h1>
</div>
<p>Copyright(c) 2017 Stefano Balietti
MIT Licensed</p>
</div>
<div class="body">
<p>Displays multidimensional data in the shape of a Chernoff Face.</p>
<p>www.nodegame.org</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
<span class="hljs-meta">
    "use strict"</span>;

    <span class="hljs-keyword">var</span> Table = W.Table;

    node.widgets.register(<span class="hljs-string">'ChernoffFaces'</span>, ChernoffFaces);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow"></a>
Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    ChernoffFaces.version = <span class="hljs-string">'0.6.2'</span>;
    ChernoffFaces.description =
        <span class="hljs-string">'Display parametric data in the form of a Chernoff Face.'</span>;

    ChernoffFaces.title = <span class="hljs-string">'ChernoffFaces'</span>;
    ChernoffFaces.className = <span class="hljs-string">'chernofffaces'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow"></a>
Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.dependencies = {
        <span class="hljs-attr">JSUS</span>: {},
        <span class="hljs-attr">Table</span>: {},
        <span class="hljs-attr">Canvas</span>: {},
        <span class="hljs-attr">SliderControls</span>: {}
    };

    ChernoffFaces.FaceVector = FaceVector;
    ChernoffFaces.FacePainter = FacePainter;
    ChernoffFaces.width = <span class="hljs-number">100</span>;
    ChernoffFaces.height = <span class="hljs-number">100</span>;
    ChernoffFaces.onChange = <span class="hljs-string">'CF_CHANGE'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces-constructor">
  <h2>
    <a href="#chernofffaces-constructor" name="chernofffaces-constructor" class="pilcrow"></a>
ChernoffFaces constructor
  </h2>
</div>
</div>
<div class="body">
<p>Creates a new instance of ChernoffFaces</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Canvas constructor</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">ChernoffFaces</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="public-properties">
  <h2>
    <a href="#public-properties" name="public-properties" class="pilcrow"></a>
Public Properties
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.options">
  <h3>
    <a href="#chernofffaces.options" name="chernofffaces.options" class="pilcrow"></a>
ChernoffFaces.options
  </h3>
</div>
<p>Configuration options</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.options = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.table">
  <h3>
    <a href="#chernofffaces.table" name="chernofffaces.table" class="pilcrow"></a>
ChernoffFaces.table
  </h3>
</div>
<p>The table containing everything</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.table = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.sc">
  <h3>
    <a href="#chernofffaces.sc" name="chernofffaces.sc" class="pilcrow"></a>
ChernoffFaces.sc
  </h3>
</div>
<p>The slider controls of the interface
Can be set manually via options.controls.
@see SliderControls</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.sc = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.fp">
  <h3>
    <a href="#chernofffaces.fp" name="chernofffaces.fp" class="pilcrow"></a>
ChernoffFaces.fp
  </h3>
</div>
<p>The object generating the Chernoff faces
@see FacePainter</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.fp = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.canvas">
  <h3>
    <a href="#chernofffaces.canvas" name="chernofffaces.canvas" class="pilcrow"></a>
ChernoffFaces.canvas
  </h3>
</div>
<p>The HTMLElement canvas where the faces are created</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.canvas = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.changes">
  <h3>
    <a href="#chernofffaces.changes" name="chernofffaces.changes" class="pilcrow"></a>
ChernoffFaces.changes
  </h3>
</div>
<p>History all the changes (if options.trackChanges is TRUE).
Each time the <code>draw</code> method is called, the input parameters
and a time measurement will be added here.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.changes = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.onchange">
  <h3>
    <a href="#chernofffaces.onchange" name="chernofffaces.onchange" class="pilcrow"></a>
ChernoffFaces.onChange
  </h3>
</div>
<p>Name of the event to emit to update the canvas (falsy disabled)</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.onChange = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.onchangecb">
  <h3>
    <a href="#chernofffaces.onchangecb" name="chernofffaces.onchangecb" class="pilcrow"></a>
ChernoffFaces.onChangeCb
  </h3>
</div>
<p>Updates the canvas when the onChange event is emitted</p>
<p>@param {object} f Optional. The list of features to change.
Can be a complete set or subset of all the features. If
not specified, it will try to get the features from the
the controls object, and if not found, a random vector
will be created.
@param {boolean} updateControls Optional. If TRUE, controls
are updated with the new values. Default, FALSE.</p>
<p>@see ChernoffFaces.draw</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.onChangeCb = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">f, updateControls</span>) </span>{
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> updateControls) updateControls = <span class="hljs-literal">false</span>;
            <span class="hljs-keyword">if</span> (!f) {
                <span class="hljs-keyword">if</span> (that.sc) f = that.sc.getValues();
                <span class="hljs-keyword">else</span> f = FaceVector.random();
            }
            that.draw(f, updateControls);
        };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="choicetable.timefrom">
  <h3>
    <a href="#choicetable.timefrom" name="choicetable.timefrom" class="pilcrow"></a>
ChoiceTable.timeFrom
  </h3>
</div>
</div>
<div class="body">
<p>Name of the event to measure time from for each change</p>
<p>Default event is a new step is loaded (user can interact with
the screen). Set it to FALSE, to have absolute time.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">node.timer.getTimeSince</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.timeFrom = <span class="hljs-string">'step'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="chernofffaces.features">
  <h3>
    <a href="#chernofffaces.features" name="chernofffaces.features" class="pilcrow"></a>
ChernoffFaces.features
  </h3>
</div>
<p>The object containing all the features to draw Chernoff faces</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.features = <span class="hljs-literal">null</span>;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces.init">
  <h3>
    <a href="#chernofffaces.init" name="chernofffaces.init" class="pilcrow"></a>
ChernoffFaces.init
  </h3>
</div>
</div>
<div class="body">
<p>Inits the widget</p>
<p>Stores the reference to options, most of the operations are done
by the <code>append</code> method.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Configuration options. Accepted options:
<ul>
<li>
canvas {object} containing all options for canvas
</li>
<li>
width {number} width of the canvas (read only if canvas is not set)
</li>
<li>
height {number} height of the canvas (read only if canvas is not set)
</li>
<li>
features {FaceVector} vector of face-features. Default: random
</li>
<li>
onChange {string|boolean} The name of the event that will trigger
redrawing the canvas, or null/false to disable event listener
</li>
<li>
controls {object|false} the controls (usually a set of sliders)
offering the user the ability to manipulate the canvas. If equal
to false no controls will be created. Default: SlidersControls.
Any custom implementation must provide the following methods:
<pre><code>   - getValues: returns the current features vector
   - refresh: redraws the current feature vector
   - init: accepts a configuration object containing a
        features and onChange as specified above.</code></pre>
</li>
</ul>
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{

        <span class="hljs-keyword">this</span>.options = options;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>Face Painter.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (options.features) {
            <span class="hljs-keyword">this</span>.features = <span class="hljs-keyword">new</span> FaceVector(options.features);
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.features) {
            <span class="hljs-keyword">this</span>.features = FaceVector.random();
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Draw features, if facepainter was already created.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.fp) <span class="hljs-keyword">this</span>.fp.draw(<span class="hljs-keyword">this</span>.features);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>onChange event.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (options.onChange === <span class="hljs-literal">false</span> || options.onChange === <span class="hljs-literal">null</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.onChange) {
                node.off(<span class="hljs-keyword">this</span>.onChange, <span class="hljs-keyword">this</span>.onChangeCb);
                <span class="hljs-keyword">this</span>.onChange = <span class="hljs-literal">null</span>;
            }
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.onChange = <span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.onChange ?
                ChernoffFaces.onChange : options.onChange;
            node.on(<span class="hljs-keyword">this</span>.onChange, <span class="hljs-keyword">this</span>.onChangeCb);
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces.getcanvas">
  <h2>
    <a href="#chernofffaces.getcanvas" name="chernofffaces.getcanvas" class="pilcrow"></a>
ChernoffFaces.getCanvas
  </h2>
</div>
</div>
<div class="body">
<p>Returns the reference to current wrapper Canvas object</p>
<p>To get to the HTML Canvas element use <code>canvas.canvas</code>.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">Canvas</span>
<span>Canvas object
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Canvas</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.prototype.getCanvas = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.canvas;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces.buildhtml">
  <h2>
    <a href="#chernofffaces.buildhtml" name="chernofffaces.buildhtml" class="pilcrow"></a>
ChernoffFaces.buildHTML
  </h2>
</div>
</div>
<div class="body">
<p>Builds HTML objects, but does not append them</p>
<p>Creates the table, canvas, draw the current image, and
eventually adds the controls.</p>
<p>If the table was already built, it returns immediately.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.prototype.buildHTML = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> controlsOptions, f;
        <span class="hljs-keyword">var</span> tblOptions, options;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.table) <span class="hljs-keyword">return</span>;

        options = <span class="hljs-keyword">this</span>.options;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>Table.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        tblOptions = {};
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.id) tblOptions.id = <span class="hljs-keyword">this</span>.id;

        <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> options.className) {
            tblOptions.className = options.className;
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (options.className !== <span class="hljs-literal">false</span>) {
            tblOptions.className = <span class="hljs-string">'cf_table'</span>;
        }

        <span class="hljs-keyword">this</span>.table = <span class="hljs-keyword">new</span> Table(tblOptions);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>Canvas.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.canvas) <span class="hljs-keyword">this</span>.buildCanvas();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>Controls.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.controls || options.controls) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>Sc options.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            f = J.mergeOnKey(FaceVector.defaults, <span class="hljs-keyword">this</span>.features, <span class="hljs-string">'value'</span>);
            controlsOptions = {
                <span class="hljs-attr">id</span>: <span class="hljs-string">'cf_controls'</span>,
                <span class="hljs-attr">features</span>: f,
                <span class="hljs-attr">onChange</span>: <span class="hljs-keyword">this</span>.onChange,
                <span class="hljs-attr">submit</span>: <span class="hljs-string">'Send'</span>
            };
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>Create them.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'object'</span> === <span class="hljs-keyword">typeof</span> options.controls) {
                <span class="hljs-keyword">this</span>.sc = options.controls;
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.sc = node.widgets.get(<span class="hljs-string">'SliderControls'</span>, controlsOptions);
            }
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>Table.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sc) {
            <span class="hljs-keyword">this</span>.table.addRow(
                [{
                    <span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.sc,
                    <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.id + <span class="hljs-string">'_td_controls'</span>
                },{
                    <span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.canvas,
                    <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.id + <span class="hljs-string">'_td_cf'</span>
                }]
            );
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.table.add({
                <span class="hljs-attr">content</span>: <span class="hljs-keyword">this</span>.canvas,
                <span class="hljs-attr">id</span>: <span class="hljs-keyword">this</span>.id + <span class="hljs-string">'_td_cf'</span>
            });
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>Create and append table.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.table.parse();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces.buildcanvas">
  <h2>
    <a href="#chernofffaces.buildcanvas" name="chernofffaces.buildcanvas" class="pilcrow"></a>
ChernoffFaces.buildCanvas
  </h2>
</div>
</div>
<div class="body">
<p>Builds the canvas object and face painter</p>
<p>All the necessary to draw faces</p>
<p>If the canvas was already built, it simply returns it.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">canvas</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.prototype.buildCanvas = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> options;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.canvas) {
            options = <span class="hljs-keyword">this</span>.options;

            <span class="hljs-keyword">if</span> (!options.canvas) {
                options.canvas = {};
                <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.height) {
                    options.canvas.height = options.height;
                }
                <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.width) {
                    options.canvas.width = options.width;
                }
            }
            <span class="hljs-keyword">this</span>.canvas = W.getCanvas(<span class="hljs-string">'ChernoffFaces_canvas'</span>, options.canvas);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>Face Painter.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">this</span>.fp = <span class="hljs-keyword">new</span> FacePainter(<span class="hljs-keyword">this</span>.canvas);
            <span class="hljs-keyword">this</span>.fp.draw(<span class="hljs-keyword">this</span>.features);
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces.append">
  <h2>
    <a href="#chernofffaces.append" name="chernofffaces.append" class="pilcrow"></a>
ChernoffFaces.append
  </h2>
</div>
</div>
<div class="body">
<p>Appends the widget</p>
<p>Creates table, canvas, face painter (fp) and controls (sc), according
to current options.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChernoffFaces.buildHTML</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChernoffFaces.fp</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChernoffFaces.sc</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChernoffFaces.table</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Table</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Canvas</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">SliderControls</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">FacePainter</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">FaceVector</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.prototype.append = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.table) <span class="hljs-keyword">this</span>.buildHTML();
        <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.table.table);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces.draw">
  <h3>
    <a href="#chernofffaces.draw" name="chernofffaces.draw" class="pilcrow"></a>
ChernoffFaces.draw
  </h3>
</div>
</div>
<div class="body">
<p>Draw a face on canvas and optionally updates the controls</p>
<p>Stores the current value of the drawn image under <code>.features</code>.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">features</span>
<span class="dox_type">object</span>
<span>The features to draw (If not a complete   set of features, they will be merged with current values)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">updateControls</span>
<span class="dox_type">boolean</span>
<span>Optional. If equal to false,    controls are not updated. Default: true
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChernoffFaces.sc</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChernoffFaces.features</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.prototype.draw = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">features, updateControls</span>) </span>{
        <span class="hljs-keyword">var</span> time;
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'object'</span> !== <span class="hljs-keyword">typeof</span> features) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'ChernoffFaces.draw: features must be object.'</span>);
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options.trackChanges) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>Relative time.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">if</span> (<span class="hljs-string">'string'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.timeFrom) {
                time = node.timer.getTimeSince(<span class="hljs-keyword">this</span>.timeFrom);
            }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>Absolute time.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">else</span> {
                time = <span class="hljs-built_in">Date</span>.now ? <span class="hljs-built_in">Date</span>.now() : <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
            }
            <span class="hljs-keyword">this</span>.changes.push({
                <span class="hljs-attr">time</span>: time,
                <span class="hljs-attr">change</span>: features
            });
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>Create a new FaceVector, if features is not one, mixing-in
new features and old ones.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.features = (features <span class="hljs-keyword">instanceof</span> FaceVector) ? features :
            <span class="hljs-keyword">new</span> FaceVector(features, <span class="hljs-keyword">this</span>.features);

        <span class="hljs-keyword">this</span>.fp.redraw(<span class="hljs-keyword">this</span>.features);
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sc &amp;&amp; (updateControls !== <span class="hljs-literal">false</span>)) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>Without merging wrong values are passed as attributes.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">this</span>.sc.init({
                <span class="hljs-attr">features</span>: J.mergeOnKey(FaceVector.defaults, features, <span class="hljs-string">'value'</span>)
            });
            <span class="hljs-keyword">this</span>.sc.refresh();
        }
    };

    ChernoffFaces.prototype.getValues = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">if</span> (options &amp;&amp; options.changes) {
            <span class="hljs-keyword">return</span> {
                <span class="hljs-attr">changes</span>: <span class="hljs-keyword">this</span>.changes,
                <span class="hljs-attr">cf</span>: <span class="hljs-keyword">this</span>.features
            };
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.fp.face;
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="chernofffaces.randomize">
  <h3>
    <a href="#chernofffaces.randomize" name="chernofffaces.randomize" class="pilcrow"></a>
ChernoffFaces.randomize
  </h3>
</div>
</div>
<div class="body">
<p>Draws a random image and updates controls accordingly (if found)</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">ChernoffFaces.sc</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    ChernoffFaces.prototype.randomize = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> fv;
        fv = FaceVector.random();
        <span class="hljs-keyword">this</span>.fp.redraw(fv);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>If controls are visible, updates them.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.sc) {
            <span class="hljs-keyword">this</span>.sc.init({
                <span class="hljs-attr">features</span>: J.mergeOnValue(FaceVector.defaults, fv),
                <span class="hljs-attr">onChange</span>: <span class="hljs-keyword">this</span>.onChange
            });
            <span class="hljs-keyword">this</span>.sc.refresh();
        }
        <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;
    };


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="facepainter">
  <h1>
    <a href="#facepainter" name="facepainter" class="pilcrow"></a>
FacePainter
  </h1>
</div>
</div>
<div class="body">
<p>Draws faces on a Canvas</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">canvas</span>
<span class="dox_type">HTMLCanvas</span>
<span>The canvas
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">settings</span>
<span class="dox_type">object</span>
<span>Optional. Settings (not used).
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FacePainter</span>(<span class="hljs-params">canvas, settings</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="facepainter.canvas">
  <h3>
    <a href="#facepainter.canvas" name="facepainter.canvas" class="pilcrow"></a>
FacePainter.canvas
  </h3>
</div>
</div>
<div class="body">
<p>The wrapper element for the HTML canvas</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Canvas</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.canvas = <span class="hljs-keyword">new</span> W.Canvas(canvas);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="facepainter.scalex">
  <h3>
    <a href="#facepainter.scalex" name="facepainter.scalex" class="pilcrow"></a>
FacePainter.scaleX
  </h3>
</div>
</div>
<div class="body">
<p>Scales images along the X-axis of this proportion</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.scaleX = canvas.width / ChernoffFaces.width;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="facepainter.scalex-1">
  <h3>
    <a href="#facepainter.scalex-1" name="facepainter.scalex-1" class="pilcrow"></a>
FacePainter.scaleX
  </h3>
</div>
</div>
<div class="body">
<p>Scales images along the X-axis of this proportion</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.scaleY = canvas.height / ChernoffFaces.heigth;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="facepainter.face">
  <h3>
    <a href="#facepainter.face" name="facepainter.face" class="pilcrow"></a>
FacePainter.face
  </h3>
</div>
</div>
<div class="body">
<p>The last drawn face</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.face = <span class="hljs-literal">null</span>;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="methods">
  <h2>
    <a href="#methods" name="methods" class="pilcrow"></a>
Methods
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="facepainter.draw">
  <h3>
    <a href="#facepainter.draw" name="facepainter.draw" class="pilcrow"></a>
FacePainter.draw
  </h3>
</div>
</div>
<div class="body">
<p>Draws a face into the canvas and stores it as reference</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">face</span>
<span class="dox_type">object</span>
<span>Multidimensional vector of features
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">x</span>
<span class="dox_type">number</span>
<span>Optional. The x-coordinate to center the image.   Default: the center of the canvas
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">y</span>
<span class="dox_type">number</span>
<span>Optional. The y-coordinate to center the image.   Default: the center of the canvas
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Canvas</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Canvas.centerX</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Canvas.centerY</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    FacePainter.prototype.draw = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{
        <span class="hljs-keyword">if</span> (!face) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.face = face;

        <span class="hljs-keyword">this</span>.fit2Canvas(face);
        <span class="hljs-keyword">this</span>.canvas.scale(face.scaleX, face.scaleY);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<p>console.log('Face Scale ' + face.scaleY + ' ' + face.scaleX );</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        x = x || <span class="hljs-keyword">this</span>.canvas.centerX;
        y = y || <span class="hljs-keyword">this</span>.canvas.centerY;

        <span class="hljs-keyword">this</span>.drawHead(face, x, y);

        <span class="hljs-keyword">this</span>.drawEyes(face, x, y);

        <span class="hljs-keyword">this</span>.drawPupils(face, x, y);

        <span class="hljs-keyword">this</span>.drawEyebrow(face, x, y);

        <span class="hljs-keyword">this</span>.drawNose(face, x, y);

        <span class="hljs-keyword">this</span>.drawMouth(face, x, y);
    };

    FacePainter.prototype.redraw = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{
        <span class="hljs-keyword">this</span>.canvas.clear();
        <span class="hljs-keyword">this</span>.draw(face, x, y);
    };

    FacePainter.prototype.scale = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">x, y</span>) </span>{
        <span class="hljs-keyword">this</span>.canvas.scale(<span class="hljs-keyword">this</span>.scaleX, <span class="hljs-keyword">this</span>.scaleY);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p>TODO: Improve. It eats a bit of the margins</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    FacePainter.prototype.fit2Canvas = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face</span>) </span>{
        <span class="hljs-keyword">var</span> ratio;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.canvas) {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'No canvas found'</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.canvas.width &gt; <span class="hljs-keyword">this</span>.canvas.height) {
            ratio = <span class="hljs-keyword">this</span>.canvas.width / face.head_radius * face.head_scale_x;
        }
        <span class="hljs-keyword">else</span> {
            ratio = <span class="hljs-keyword">this</span>.canvas.height / face.head_radius * face.head_scale_y;
        }

        face.scaleX = ratio / <span class="hljs-number">2</span>;
        face.scaleY = ratio / <span class="hljs-number">2</span>;
    };

    FacePainter.prototype.drawHead = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{

        <span class="hljs-keyword">var</span> radius = face.head_radius;

        <span class="hljs-keyword">this</span>.canvas.drawOval({
            <span class="hljs-attr">x</span>: x,
            <span class="hljs-attr">y</span>: y,
            <span class="hljs-attr">radius</span>: radius,
            <span class="hljs-attr">scale_x</span>: face.head_scale_x,
            <span class="hljs-attr">scale_y</span>: face.head_scale_y,
            <span class="hljs-attr">color</span>: face.color,
            <span class="hljs-attr">lineWidth</span>: face.lineWidth
        });
    };

    FacePainter.prototype.drawEyes = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{

        <span class="hljs-keyword">var</span> height = FacePainter.computeFaceOffset(face, face.eye_height, y);
        <span class="hljs-keyword">var</span> spacing = face.eye_spacing;

        <span class="hljs-keyword">var</span> radius = face.eye_radius;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>console.log(face);</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.canvas.drawOval({
            <span class="hljs-attr">x</span>: x - spacing,
            <span class="hljs-attr">y</span>: height,
            <span class="hljs-attr">radius</span>: radius,
            <span class="hljs-attr">scale_x</span>: face.eye_scale_x,
            <span class="hljs-attr">scale_y</span>: face.eye_scale_y,
            <span class="hljs-attr">color</span>: face.color,
            <span class="hljs-attr">lineWidth</span>: face.lineWidth

        });
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<p>console.log(face);</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.canvas.drawOval({
            <span class="hljs-attr">x</span>: x + spacing,
            <span class="hljs-attr">y</span>: height,
            <span class="hljs-attr">radius</span>: radius,
            <span class="hljs-attr">scale_x</span>: face.eye_scale_x,
            <span class="hljs-attr">scale_y</span>: face.eye_scale_y,
            <span class="hljs-attr">color</span>: face.color,
            <span class="hljs-attr">lineWidth</span>: face.lineWidth
        });
    };

    FacePainter.prototype.drawPupils = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{

        <span class="hljs-keyword">var</span> radius = face.pupil_radius;
        <span class="hljs-keyword">var</span> spacing = face.eye_spacing;
        <span class="hljs-keyword">var</span> height = FacePainter.computeFaceOffset(face, face.eye_height, y);

        <span class="hljs-keyword">this</span>.canvas.drawOval({
            <span class="hljs-attr">x</span>: x - spacing,
            <span class="hljs-attr">y</span>: height,
            <span class="hljs-attr">radius</span>: radius,
            <span class="hljs-attr">scale_x</span>: face.pupil_scale_x,
            <span class="hljs-attr">scale_y</span>: face.pupil_scale_y,
            <span class="hljs-attr">color</span>: face.color,
            <span class="hljs-attr">lineWidth</span>: face.lineWidth
        });

        <span class="hljs-keyword">this</span>.canvas.drawOval({
            <span class="hljs-attr">x</span>: x + spacing,
            <span class="hljs-attr">y</span>: height,
            <span class="hljs-attr">radius</span>: radius,
            <span class="hljs-attr">scale_x</span>: face.pupil_scale_x,
            <span class="hljs-attr">scale_y</span>: face.pupil_scale_y,
            <span class="hljs-attr">color</span>: face.color,
            <span class="hljs-attr">lineWidth</span>: face.lineWidth
        });

    };

    FacePainter.prototype.drawEyebrow = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{

        <span class="hljs-keyword">var</span> height = FacePainter.computeEyebrowOffset(face,y);
        <span class="hljs-keyword">var</span> spacing = face.eyebrow_spacing;
        <span class="hljs-keyword">var</span> length = face.eyebrow_length;
        <span class="hljs-keyword">var</span> angle = face.eyebrow_angle;

        <span class="hljs-keyword">this</span>.canvas.drawLine({
            <span class="hljs-attr">x</span>: x - spacing,
            <span class="hljs-attr">y</span>: height,
            <span class="hljs-attr">length</span>: length,
            <span class="hljs-attr">angle</span>: angle,
            <span class="hljs-attr">color</span>: face.color,
            <span class="hljs-attr">lineWidth</span>: face.lineWidth


        });

        <span class="hljs-keyword">this</span>.canvas.drawLine({
            <span class="hljs-attr">x</span>: x + spacing,
            <span class="hljs-attr">y</span>: height,
            <span class="hljs-attr">length</span>: <span class="hljs-number">0</span>-length,
            <span class="hljs-attr">angle</span>: -angle,
            <span class="hljs-attr">color</span>: face.color,
            <span class="hljs-attr">lineWidth</span>: face.lineWidth
        });

    };

    FacePainter.prototype.drawNose = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{

        <span class="hljs-keyword">var</span> height = FacePainter.computeFaceOffset(face, face.nose_height, y);
        <span class="hljs-keyword">var</span> nastril_r_x = x + face.nose_width / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">var</span> nastril_r_y = height + face.nose_length;
        <span class="hljs-keyword">var</span> nastril_l_x = nastril_r_x - face.nose_width;
        <span class="hljs-keyword">var</span> nastril_l_y = nastril_r_y;

        <span class="hljs-keyword">this</span>.canvas.ctx.lineWidth = face.lineWidth;
        <span class="hljs-keyword">this</span>.canvas.ctx.strokeStyle = face.color;

        <span class="hljs-keyword">this</span>.canvas.ctx.save();
        <span class="hljs-keyword">this</span>.canvas.ctx.beginPath();
        <span class="hljs-keyword">this</span>.canvas.ctx.moveTo(x,height);
        <span class="hljs-keyword">this</span>.canvas.ctx.lineTo(nastril_r_x,nastril_r_y);
        <span class="hljs-keyword">this</span>.canvas.ctx.lineTo(nastril_l_x,nastril_l_y);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<p>this.canvas.ctx.closePath();</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.canvas.ctx.stroke();
        <span class="hljs-keyword">this</span>.canvas.ctx.restore();

    };

    FacePainter.prototype.drawMouth = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, x, y</span>) </span>{

        <span class="hljs-keyword">var</span> height = FacePainter.computeFaceOffset(face, face.mouth_height, y);
        <span class="hljs-keyword">var</span> startX = x - face.mouth_width / <span class="hljs-number">2</span>;
        <span class="hljs-keyword">var</span> endX = x + face.mouth_width / <span class="hljs-number">2</span>;

        <span class="hljs-keyword">var</span> top_y = height - face.mouth_top_y;
        <span class="hljs-keyword">var</span> bottom_y = height + face.mouth_bottom_y;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<p>Upper Lip</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.canvas.ctx.moveTo(startX,height);
        <span class="hljs-keyword">this</span>.canvas.ctx.quadraticCurveTo(x, top_y, endX, height);
        <span class="hljs-keyword">this</span>.canvas.ctx.stroke();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<p>Lower Lip</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.canvas.ctx.moveTo(startX,height);
        <span class="hljs-keyword">this</span>.canvas.ctx.quadraticCurveTo(x, bottom_y, endX, height);
        <span class="hljs-keyword">this</span>.canvas.ctx.stroke();

    };


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<p>TODO Scaling ?</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    FacePainter.computeFaceOffset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, offset, y</span>) </span>{
        y = y || <span class="hljs-number">0</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>var pos = y - face.head_radius * face.scaleY +
face.head_radius * face.scaleY * 2 * offset;</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">var</span> pos = y - face.head_radius + face.head_radius * <span class="hljs-number">2</span> * offset;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>console.log('POS: ' + pos);</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">return</span> pos;
    };

    FacePainter.computeEyebrowOffset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">face, y</span>) </span>{
        y = y || <span class="hljs-number">0</span>;
        <span class="hljs-keyword">var</span> eyemindistance = <span class="hljs-number">2</span>;
        <span class="hljs-keyword">return</span> FacePainter.computeFaceOffset(face, face.eye_height, y) -
            eyemindistance - face.eyebrow_eyedistance;
    };


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<div class="dox">
<div class="summary">
<p>FaceVector.defaults</p>
</div>
<div class="body">
<p>Numerical description of all the components of a standard Chernoff Face</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    FaceVector.defaults = {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>Head</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        head_radius: {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>id can be specified otherwise is taken head_radius</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            min: <span class="hljs-number">10</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">100</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Face radius'</span>
        },
        <span class="hljs-attr">head_scale_x</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.5</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale head horizontally'</span>
        },
        <span class="hljs-attr">head_scale_y</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale head vertically'</span>
        },
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>Eye</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        eye_height: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.1</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">0.9</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.4</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Eye height'</span>
        },
        <span class="hljs-attr">eye_radius</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">5</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Eye radius'</span>
        },
        <span class="hljs-attr">eye_spacing</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">50</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Eye spacing'</span>
        },
        <span class="hljs-attr">eye_scale_x</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale eyes horizontally'</span>
        },
        <span class="hljs-attr">eye_scale_y</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale eyes vertically'</span>
        },
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<p>Pupil</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        pupil_radius: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">9</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,  <span class="hljs-comment">//this.eye_radius;</span>
            label: <span class="hljs-string">'Pupil radius'</span>
        },
        <span class="hljs-attr">pupil_scale_x</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale pupils horizontally'</span>
        },
        <span class="hljs-attr">pupil_scale_y</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale pupils vertically'</span>
        },
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>Eyebrow</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        eyebrow_length: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Eyebrow length'</span>
        },
        <span class="hljs-attr">eyebrow_eyedistance</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.3</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">3</span>, <span class="hljs-comment">// From the top of the eye</span>
            label: <span class="hljs-string">'Eyebrow from eye'</span>
        },
        <span class="hljs-attr">eyebrow_angle</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">-2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">-0.5</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Eyebrow angle'</span>
        },
        <span class="hljs-attr">eyebrow_spacing</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">5</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Eyebrow spacing'</span>
        },
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<p>Nose</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        nose_height: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.4</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">1</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.4</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Nose height'</span>
        },
        <span class="hljs-attr">nose_length</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">15</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Nose length'</span>
        },
        <span class="hljs-attr">nose_width</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Nose width'</span>
        },
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>Mouth</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        mouth_height: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.75</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Mouth height'</span>
        },
        <span class="hljs-attr">mouth_width</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">2</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">100</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Mouth width'</span>
        },
        <span class="hljs-attr">mouth_top_y</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">-10</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">-2</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Upper lip'</span>
        },
        <span class="hljs-attr">mouth_bottom_y</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">-10</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">30</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Lower lip'</span>
        },

        <span class="hljs-attr">scaleX</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale X'</span>
        },

        <span class="hljs-attr">scaleY</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'Scale Y'</span>
        },

        <span class="hljs-attr">color</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'color'</span>
        },

        <span class="hljs-attr">lineWidth</span>: {
            <span class="hljs-attr">min</span>: <span class="hljs-number">0</span>,
            <span class="hljs-attr">max</span>: <span class="hljs-number">20</span>,
            <span class="hljs-attr">step</span>: <span class="hljs-number">0.01</span>,
            <span class="hljs-attr">value</span>: <span class="hljs-number">0.2</span>,
            <span class="hljs-attr">label</span>: <span class="hljs-string">'lineWidth'</span>
        }

    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<p>Compute range for each feature.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    (<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">defaults</span>) </span>{
        <span class="hljs-keyword">var</span> key;
        <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> defaults) {
            <span class="hljs-keyword">if</span> (defaults.hasOwnProperty(key)) {
                defaults[key].range = defaults[key].max - defaults[key].min;
            }
        }
    })(FaceVector.defaults);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<p>Constructs a random face vector.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">    FaceVector.random = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'*** FaceVector.random is deprecated. '</span> +
                    <span class="hljs-string">'Use new FaceVector() instead.'</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FaceVector();
    };

    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">FaceVector</span>(<span class="hljs-params">faceVector, defaults</span>) </span>{
        <span class="hljs-keyword">var</span> key;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<p>Make random vector.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> faceVector) {
            <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> FaceVector.defaults) {
                <span class="hljs-keyword">if</span> (FaceVector.defaults.hasOwnProperty(key)) {
                    <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'color'</span>) {
                        <span class="hljs-keyword">this</span>.color = <span class="hljs-string">'red'</span>;
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'lineWidth'</span>) {
                        <span class="hljs-keyword">this</span>.lineWidth = <span class="hljs-number">1</span>;
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'scaleX'</span>) {
                        <span class="hljs-keyword">this</span>.scaleX = <span class="hljs-number">1</span>;
                    }
                    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (key === <span class="hljs-string">'scaleY'</span>) {
                        <span class="hljs-keyword">this</span>.scaleY = <span class="hljs-number">1</span>;
                    }
                    <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">this</span>[key] = FaceVector.defaults[key].min +
                            <span class="hljs-built_in">Math</span>.random() * FaceVector.defaults[key].range;
                    }
                }
            }
        }
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<p>Mixin values.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'object'</span> === <span class="hljs-keyword">typeof</span> faceVector) {

            <span class="hljs-keyword">this</span>.scaleX = faceVector.scaleX || <span class="hljs-number">1</span>;
            <span class="hljs-keyword">this</span>.scaleY = faceVector.scaleY || <span class="hljs-number">1</span>;

            <span class="hljs-keyword">this</span>.color = faceVector.color || <span class="hljs-string">'green'</span>;
            <span class="hljs-keyword">this</span>.lineWidth = faceVector.lineWidth || <span class="hljs-number">1</span>;

            defaults = defaults || FaceVector.defaults;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>Merge on key.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">            <span class="hljs-keyword">for</span> (key <span class="hljs-keyword">in</span> defaults) {
                <span class="hljs-keyword">if</span> (defaults.hasOwnProperty(key)){
                    <span class="hljs-keyword">if</span> (faceVector.hasOwnProperty(key)) {
                        <span class="hljs-keyword">this</span>[key] = faceVector[key];
                    }
                    <span class="hljs-keyword">else</span> {
                        <span class="hljs-keyword">this</span>[key] = defaults ? defaults[key] :
                            FaceVector.defaults[key].value;
                    }
                }
            }
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'FaceVector constructor: faceVector must be '</span> +
                                <span class="hljs-string">'object or undefined.'</span>);
        }
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<pre><code>//Constructs a random face vector.
FaceVector.prototype.shuffle = function() {
    for (var key in this) {
        if (this.hasOwnProperty(key)) {
            if (FaceVector.defaults.hasOwnProperty(key)) {
                if (key !== 'color') {
                    this[key] = FaceVector.defaults[key].min +
                        Math.random() * FaceVector.defaults[key].max;
                }
            }
        }
    }
};
</code></pre>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<pre><code>//Computes the Euclidean distance between two FaceVectors.
FaceVector.prototype.distance = function(face) {
    return FaceVector.distance(this, face);
};


FaceVector.distance = function(face1, face2) {
    var sum = 0.0;
    var diff;

    for (var key in face1) {
        if (face1.hasOwnProperty(key)) {
            diff = face1[key] - face2[key];
            sum = sum + diff * diff;
        }
    }

    return Math.sqrt(sum);
};

FaceVector.prototype.toString = function() {
    var out = 'Face: ';
    for (var key in this) {
        if (this.hasOwnProperty(key)) {
            out += key + ' ' + this[key];
        }
    }
    return out;
};
</code></pre>

        </td>
        <td class="code highlight">
          <pre class="javascript">
})(node);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
