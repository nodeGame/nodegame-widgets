<!DOCTYPE html>
<html>
<head>
  <title>EmailForm.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "widgets/EmailForm.js";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#emailform">EmailForm</a>
      </div>

      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>

      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>

      <div class="heading h2">
        <a href="#emailform-constructor">EmailForm constructor</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.onsubmit">EmailForm.onsubmit</a>
      </div>

      <div class="heading h3">
        <a href="#emailform._email">EmailForm._email</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.attempts">EmailForm.attempts</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.timeinput">EmailForm.timeInput</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.formelement">EmailForm.formElement</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.inputelement">EmailForm.inputElement</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.buttonelement">EmailForm.buttonElement</a>
      </div>

      <div class="heading h2">
        <a href="#emailform-methods">EmailForm methods</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.verifyinput">EmailForm.verifyInput</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.append">EmailForm.append</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.setvalues">EmailForm.setValues</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.getvalues">EmailForm.getValues</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.sendvalues">EmailForm.sendValues</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.highlight">EmailForm.highlight</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.unhighlight">EmailForm.unhighlight</a>
      </div>

      <div class="heading h3">
        <a href="#emailform.reset">EmailForm.reset</a>
      </div>

      <div class="heading h2">
        <a href="#helper-methods">Helper methods.</a>
      </div>

      <div class="heading h3">
        <a href="#getemail">getEmail</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform">
  <h1>
    <a href="#emailform" name="emailform" class="pilcrow"></a>
EmailForm
  </h1>
</div>
<p>Copyright(c) 2017 Stefano Balietti <a href="mailto:ste@nodegame.org.html">ste@nodegame.org</a>
MIT Licensed</p>
</div>
<div class="body">
<p>Displays a form to input email</p>
<p>www.nodegame.org</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
<span class="hljs-meta">
    "use strict"</span>;

    node.widgets.register(<span class="hljs-string">'EmailForm'</span>, EmailForm);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow"></a>
Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    EmailForm.version = <span class="hljs-string">'0.9.0'</span>;
    EmailForm.description = <span class="hljs-string">'Displays a configurable email form.'</span>;

    EmailForm.title = <span class="hljs-string">'Email'</span>;
    EmailForm.className = <span class="hljs-string">'emailform'</span>;

    EmailForm.texts.label = <span class="hljs-string">'Enter your email:'</span>;
    EmailForm.texts.errString = <span class="hljs-string">'Not a valid email address, '</span> +
                                <span class="hljs-string">'please correct it and submit it again.'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow"></a>
Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    EmailForm.dependencies = { <span class="hljs-attr">JSUS</span>: {} };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform-constructor">
  <h2>
    <a href="#emailform-constructor" name="emailform-constructor" class="pilcrow"></a>
EmailForm constructor
  </h2>
</div>
</div>
<div class="body">
<p><code>EmailForm</code> sends a feedback message to the server</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>configuration option
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">EmailForm</span>(<span class="hljs-params">options</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.onsubmit">
  <h3>
    <a href="#emailform.onsubmit" name="emailform.onsubmit" class="pilcrow"></a>
EmailForm.onsubmit
  </h3>
</div>
</div>
<div class="body">
<p>Options passed to <code>getValues</code> when the submit button is pressed</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">Feedback.getValues</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!options.onsubmit) {
            <span class="hljs-keyword">this</span>.onsubmit = { <span class="hljs-attr">emailOnly</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">say</span>: <span class="hljs-literal">true</span>, <span class="hljs-attr">updateUI</span>: <span class="hljs-literal">true</span> };
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (<span class="hljs-string">'object'</span> === <span class="hljs-keyword">typeof</span> options.onsubmit) {
            <span class="hljs-keyword">this</span>.onsubmit = options.onsubmit;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'EmailForm constructor: options.onsubmit '</span> +
                                <span class="hljs-string">'must be string or object. Found: '</span> +
                                options.onsubmit);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform._email">
  <h3>
    <a href="#emailform._email" name="emailform._email" class="pilcrow"></a>
EmailForm._email
  </h3>
</div>
</div>
<div class="body">
<p>Internal storage of the value of the email</p>
<p>This value is used when the form has not been created yet</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">EmailForm.createForm</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>._email = options.email || <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.attempts">
  <h3>
    <a href="#emailform.attempts" name="emailform.attempts" class="pilcrow"></a>
EmailForm.attempts
  </h3>
</div>
</div>
<div class="body">
<p>Invalid emails tried</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.attempts = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.timeinput">
  <h3>
    <a href="#emailform.timeinput" name="emailform.timeinput" class="pilcrow"></a>
EmailForm.timeInput
  </h3>
</div>
</div>
<div class="body">
<p>Time when the email was inserted (first character, last attempt)</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.timeInput = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.formelement">
  <h3>
    <a href="#emailform.formelement" name="emailform.formelement" class="pilcrow"></a>
EmailForm.formElement
  </h3>
</div>
</div>
<div class="body">
<p>The email's HTML form</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.formElement = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.inputelement">
  <h3>
    <a href="#emailform.inputelement" name="emailform.inputelement" class="pilcrow"></a>
EmailForm.inputElement
  </h3>
</div>
</div>
<div class="body">
<p>The email's HTML input form</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.inputElement = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.buttonelement">
  <h3>
    <a href="#emailform.buttonelement" name="emailform.buttonelement" class="pilcrow"></a>
EmailForm.buttonElement
  </h3>
</div>
</div>
<div class="body">
<p>The email's HTML submit button</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.buttonElement = <span class="hljs-literal">null</span>;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="emailform-methods">
  <h2>
    <a href="#emailform-methods" name="emailform-methods" class="pilcrow"></a>
EmailForm methods
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    EmailForm.prototype.createForm = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> that;
        <span class="hljs-keyword">var</span> formElement, labelElement, inputElement, buttonElement;

        that = <span class="hljs-keyword">this</span>;

        formElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'form'</span>);
        formElement.className = <span class="hljs-string">'emailform-form'</span>;

        labelElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'label'</span>);
        labelElement.innerHTML = <span class="hljs-keyword">this</span>.getText(<span class="hljs-string">'label'</span>);

        inputElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'input'</span>);
        inputElement.setAttribute(<span class="hljs-string">'type'</span>, <span class="hljs-string">'text'</span>);
        inputElement.setAttribute(<span class="hljs-string">'placeholder'</span>, <span class="hljs-string">'Email'</span>);
        inputElement.className = <span class="hljs-string">'emailform-input form-control'</span>;

        buttonElement = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'input'</span>);
        buttonElement.setAttribute(<span class="hljs-string">'type'</span>, <span class="hljs-string">'submit'</span>);
        buttonElement.setAttribute(<span class="hljs-string">'value'</span>, <span class="hljs-string">'Submit email'</span>);
        buttonElement.className = <span class="hljs-string">'btn btn-lg btn-primary '</span> +
            <span class="hljs-string">'emailform-submit'</span>;

        formElement.appendChild(labelElement);
        formElement.appendChild(inputElement);
        formElement.appendChild(buttonElement);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<p>Add listeners on input form.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        J.addEvent(formElement, <span class="hljs-string">'submit'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
            event.preventDefault();
            that.getValues(that.onsubmit);
        }, <span class="hljs-literal">true</span>);
        J.addEvent(formElement, <span class="hljs-string">'input'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) </span>{
            <span class="hljs-keyword">if</span> (!that.timeInput) that.timeInput = J.now();
            <span class="hljs-keyword">if</span> (that.isHighlighted()) that.unhighlight();
        }, <span class="hljs-literal">true</span>);


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>Store references.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.formElement = formElement;
        <span class="hljs-keyword">this</span>.inputElement = inputElement;
        <span class="hljs-keyword">this</span>.buttonElement = buttonElement;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>If a value was previously set, insert it in the form.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>._email) <span class="hljs-keyword">this</span>.formElement.value = <span class="hljs-keyword">this</span>._email;
        <span class="hljs-keyword">this</span>._email = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">return</span> formElement;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.verifyinput">
  <h3>
    <a href="#emailform.verifyinput" name="emailform.verifyinput" class="pilcrow"></a>
EmailForm.verifyInput
  </h3>
</div>
</div>
<div class="body">
<p>Verify current email, updates interface, and optionally marks attempt</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">markAttempt</span>
<span class="dox_type">boolean</span>
<span>Optional. If TRUE, the current email    is added to the attempts array. Default: TRUE
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">updateUI</span>
<span class="dox_type">boolean</span>
<span>Optional. If TRUE, the interface is updated.    Default: FALSE
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">boolean</span>
<span>TRUE, if the email is valid
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">EmailForm.getValues</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">getEmail</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.verifyInput = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">markAttempt, updateUI</span>) </span>{
        <span class="hljs-keyword">var</span> email, res;
        email = getEmail.call(<span class="hljs-keyword">this</span>);
        res = J.isEmail(email);
        <span class="hljs-keyword">if</span> (res &amp;&amp; updateUI) {
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.inputElement) <span class="hljs-keyword">this</span>.inputElement.disabled = <span class="hljs-literal">true</span>;
            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.buttonElement) {
                <span class="hljs-keyword">this</span>.buttonElement.disabled = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">this</span>.buttonElement.value = <span class="hljs-string">'Sent!'</span>;
            }
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (updateUI &amp;&amp; <span class="hljs-keyword">this</span>.buttonElement) {
                <span class="hljs-keyword">this</span>.buttonElement.value = <span class="hljs-keyword">this</span>.getText(<span class="hljs-string">'errString'</span>);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> markAttempt || markAttempt) {
                <span class="hljs-keyword">this</span>.attempts.push(email);
            }
        }
        <span class="hljs-keyword">return</span> res;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.append">
  <h3>
    <a href="#emailform.append" name="emailform.append" class="pilcrow"></a>
EmailForm.append
  </h3>
</div>
</div>
<div class="body">
<p>Appends widget to this.bodyDiv</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.append = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.createForm();
        <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.formElement);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.setvalues">
  <h3>
    <a href="#emailform.setvalues" name="emailform.setvalues" class="pilcrow"></a>
EmailForm.setValues
  </h3>
</div>
</div>
<div class="body">
<p>Set the value of the email input form</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.setValues = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> email;
        options = options || {};
        <span class="hljs-keyword">if</span> (!options.email) email = J.randomEmail();
        <span class="hljs-keyword">else</span> email = options.email;

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.inputElement) <span class="hljs-keyword">this</span>._email = email;
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">this</span>.inputElement.value = email;

        <span class="hljs-keyword">this</span>.timeInput = J.now();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.getvalues">
  <h3>
    <a href="#emailform.getvalues" name="emailform.getvalues" class="pilcrow"></a>
EmailForm.getValues
  </h3>
</div>
</div>
<div class="body">
<p>Returns the email and paradata</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">object</span>
<span>Optional. Configures the return value.   Available optionts:
<ul>
<li>emailOnly:   If TRUE, returns just the email (default: FALSE),</li>
<li>verify:      If TRUE, check if the email is valid (default: TRUE),</li>
<li>reset:       If TRUTHY and the email is valid, then it resets
the email value before returning (default: FALSE),</li>
<li>markAttempt: If TRUE, getting the value counts as an attempt
(default: TRUE),</li>
<li>updateUI:    If TRUE, the UI (form, input, button) is updated.
Default: FALSE.</li>
<li>highlight:   If TRUE, if email is not the valid, widget is
is highlighted. Default: (updateUI || FALSE).</li>
<li>say:         If TRUE, and the email is valid, then it sends
a data msg. Default: FALSE.</li>
<li>sayAnyway:   If TRUE, it sends a data msg regardless of the
validity of the email. Default: FALSE.</li>
</ul>
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">string</span>
<span class="dox_type">object</span>
<span>The email, and optional paradata
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">EmailForm.sendValues</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">EmailForm.verifyInput</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">getEmail</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.getValues = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts</span>) </span>{
        <span class="hljs-keyword">var</span> email, res;
        opts = opts || {};

        email = getEmail.call(<span class="hljs-keyword">this</span>);

        <span class="hljs-keyword">if</span> (opts.verify !== <span class="hljs-literal">false</span>) {
            res = <span class="hljs-keyword">this</span>.verifyInput(opts.markAttempt, opts.updateUI);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>Only value.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!opts.emailOnly) {
            email = {
                <span class="hljs-attr">time</span>: <span class="hljs-keyword">this</span>.timeInput,
                <span class="hljs-attr">email</span>: email,
                <span class="hljs-attr">attempts</span>: <span class="hljs-keyword">this</span>.attempts,
                <span class="hljs-attr">valid</span>: res
            };
        }

        <span class="hljs-keyword">if</span> (res === <span class="hljs-literal">false</span>) {
            <span class="hljs-keyword">if</span> (opts.updateUI || opts.highlight) <span class="hljs-keyword">this</span>.highlight();
            <span class="hljs-keyword">this</span>.timeInput = <span class="hljs-literal">null</span>;
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>Send the message.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> ((opts.say &amp;&amp; res) || opts.sayAnyway) {
            <span class="hljs-keyword">this</span>.sendValues({ <span class="hljs-attr">values</span>: email });
        }

        <span class="hljs-keyword">if</span> (opts.reset) <span class="hljs-keyword">this</span>.reset();

        <span class="hljs-keyword">return</span> email;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.sendvalues">
  <h3>
    <a href="#emailform.sendvalues" name="emailform.sendvalues" class="pilcrow"></a>
EmailForm.sendValues
  </h3>
</div>
</div>
<div class="body">
<p>Sends a DATA message with label 'email' with current email and paradata</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">opts</span>
<span class="dox_type">object</span>
<span>Optional. Options to pass to the <code>getValues</code>    method. Additional options:
<ul>
<li>values: actual values to send, instead of the return
value of <code>getValues</code></li>
<li>to: recipient of the message. Default: 'SERVER'</li>
</ul>
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">string</span>
<span class="dox_type">object</span>
<span>The email, and optional paradata
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">EmailForm.getValues</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.sendValues = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">opts</span>) </span>{
        <span class="hljs-keyword">var</span> values;
        opts = opts || { <span class="hljs-attr">emailOnly</span>: <span class="hljs-literal">true</span> };
        values = opts.values || <span class="hljs-keyword">this</span>.getValues(opts);
        node.say(<span class="hljs-string">'email'</span>, opts.to || <span class="hljs-string">'SERVER'</span>, values);
        <span class="hljs-keyword">return</span> values;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.highlight">
  <h3>
    <a href="#emailform.highlight" name="emailform.highlight" class="pilcrow"></a>
EmailForm.highlight
  </h3>
</div>
</div>
<div class="body">
<p>Highlights the email form</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">The</span>
<span class="dox_type">string</span>
<span>style for the form border. Default: '1px solid red'
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">EmailForm.highlighted</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.highlight = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">border</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.inputElement) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">if</span> (border &amp;&amp; <span class="hljs-string">'string'</span> !== <span class="hljs-keyword">typeof</span> border) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'EmailForm.highlight: border must be '</span> +
                                <span class="hljs-string">'string or undefined. Found: '</span> + border);
        }
        <span class="hljs-keyword">this</span>.inputElement.style.border = border || <span class="hljs-string">'3px solid red'</span>;
        <span class="hljs-keyword">this</span>.highlighted = <span class="hljs-literal">true</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.unhighlight">
  <h3>
    <a href="#emailform.unhighlight" name="emailform.unhighlight" class="pilcrow"></a>
EmailForm.unhighlight
  </h3>
</div>
</div>
<div class="body">
<p>Removes highlight from the form</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">EmailForm.highlighted</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.unhighlight = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.inputElement) <span class="hljs-keyword">return</span>;
        <span class="hljs-keyword">this</span>.inputElement.style.border = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.highlighted = <span class="hljs-literal">false</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="emailform.reset">
  <h3>
    <a href="#emailform.reset" name="emailform.reset" class="pilcrow"></a>
EmailForm.reset
  </h3>
</div>
</div>
<div class="body">
<p>Resets email and collected paradata</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    EmailForm.prototype.reset = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.attempts = [];
        <span class="hljs-keyword">this</span>.timeInput = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>._email = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.inputElement) <span class="hljs-keyword">this</span>.inputElement.value = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.isHighlighted()) <span class="hljs-keyword">this</span>.unhighlight();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="helper-methods">
  <h2>
    <a href="#helper-methods" name="helper-methods" class="pilcrow"></a>
Helper methods.
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="getemail">
  <h3>
    <a href="#getemail" name="getemail" class="pilcrow"></a>
getEmail
  </h3>
</div>
</div>
<div class="body">
<p>Returns the value of the email in form or in <code>_email</code></p>
<p>Must be invoked with right context</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">string</span>
<span>The value of the email, if any
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getEmail</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.inputElement ? <span class="hljs-keyword">this</span>.inputElement.value : <span class="hljs-keyword">this</span>._email;
    }

})(node);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
