<!DOCTYPE html>
<html>
<head>
  <title>VisualTimer.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "widgets/VisualTimer.js";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#visualtimer">VisualTimer</a>
      </div>

      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>

      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>

      <div class="heading h2">
        <a href="#visualtimer-constructor">VisualTimer constructor</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.gametimer">VisualTimer.gameTimer</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.mainbox">VisualTimer.mainBox</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.waitbox">VisualTimer.waitBox</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.activebox">VisualTimer.activeBox</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.isinitialized">VisualTimer.isInitialized</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.options">VisualTimer.options</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.internaltimer">VisualTimer.internalTimer</a>
      </div>

      <div class="heading h2">
        <a href="#visualtimer-methods">VisualTimer methods</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.init">VisualTimer.init</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.clear">VisualTimer.clear</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.updatedisplay">VisualTimer.updateDisplay</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.start">VisualTimer.start</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.restart">VisualTimer.restart</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.stop">VisualTimer.stop</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.switchactiveboxto">VisualTimer.switchActiveBoxTo</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.startwaiting">VisualTimer.startWaiting</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.starttiming">VisualTimer.startTiming</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.resume">VisualTimer.resume</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.settozero">VisualTimer.setToZero</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.istimeup">VisualTimer.isTimeup</a>
      </div>

      <div class="heading h3">
        <a href="#visualtimer.dotimeup">VisualTimer.doTimeUp</a>
      </div>

      <div class="heading h1">
        <a href="#timerbox">TimerBox</a>
      </div>

      <div class="heading h2">
        <a href="#timerbox-constructor">TimerBox constructor</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.boxdiv">TimerBox.boxDiv</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.titlediv">TimerBox.titleDiv</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.bodydiv">TimerBox.bodyDiv</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.timeleft">TimerBox.timeLeft</a>
      </div>

      <div class="heading h2">
        <a href="#timerbox-methods">TimerBox methods</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.hidebox">TimerBox.hideBox</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.unhidebox">TimerBox.unhideBox</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.hidetitle">TimerBox.hideTitle</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.unhidetitle">TimerBox.unhideTitle</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.hidebody">TimerBox.hideBody</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.unhidebody">TimerBox.unhideBody</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.settitle">TimerBox.setTitle</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.setclassnametitle">TimerBox.setClassNameTitle</a>
      </div>

      <div class="heading h3">
        <a href="#timerbox.setclassnamebody">TimerBox.setClassNameBody</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer">
  <h1>
    <a href="#visualtimer" name="visualtimer" class="pilcrow"></a>
VisualTimer
  </h1>
</div>
<p>Copyright(c) 2017 Stefano Balietti <a href="mailto:ste@nodegame.org.html">ste@nodegame.org</a>
MIT Licensed</p>
</div>
<div class="body">
<p>Display a configurable timer for the game</p>
<p>Timer can trigger events, only for countdown smaller than 1h.</p>
<p>www.nodegame.org</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
<span class="hljs-meta">
    "use strict"</span>;

    node.widgets.register(<span class="hljs-string">'VisualTimer'</span>, VisualTimer);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow"></a>
Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    VisualTimer.version = <span class="hljs-string">'0.9.1'</span>;
    VisualTimer.description = <span class="hljs-string">'Display a configurable timer for the game. '</span> +
        <span class="hljs-string">'Can trigger events. Only for countdown smaller than 1h.'</span>;

    VisualTimer.title = <span class="hljs-string">'Time Left'</span>;
    VisualTimer.className = <span class="hljs-string">'visualtimer'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow"></a>
Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    VisualTimer.dependencies = {
        <span class="hljs-attr">GameTimer</span>: {},
        <span class="hljs-attr">JSUS</span>: {}
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer-constructor">
  <h2>
    <a href="#visualtimer-constructor" name="visualtimer-constructor" class="pilcrow"></a>
VisualTimer constructor
  </h2>
</div>
</div>
<div class="body">
<p><code>VisualTimer</code> displays and manages a <code>GameTimer</code></p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Configuration options The options it can take are:
<ul>
<li>any options that can be passed to a <code>GameTimer</code></li>
<li><code>waitBoxOptions</code>: an option object to be passed to <code>TimerBox</code></li>
<li><code>mainBoxOptions</code>: an option object to be passed to <code>TimerBox</code></li>
</ul>
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">TimerBox</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">VisualTimer</span>(<span class="hljs-params"></span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.gametimer">
  <h3>
    <a href="#visualtimer.gametimer" name="visualtimer.gametimer" class="pilcrow"></a>
VisualTimer.gameTimer
  </h3>
</div>
</div>
<div class="body">
<p>The timer which counts down the game time</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">node.timer.createTimer</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.gameTimer = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.mainbox">
  <h3>
    <a href="#visualtimer.mainbox" name="visualtimer.mainbox" class="pilcrow"></a>
VisualTimer.mainBox
  </h3>
</div>
</div>
<div class="body">
<p>The <code>TimerBox</code> which displays the main timer</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">TimerBox</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.mainBox = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.waitbox">
  <h3>
    <a href="#visualtimer.waitbox" name="visualtimer.waitbox" class="pilcrow"></a>
VisualTimer.waitBox
  </h3>
</div>
</div>
<div class="body">
<p>The <code>TimerBox</code> which displays the wait timer</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">TimerBox</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.waitBox = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.activebox">
  <h3>
    <a href="#visualtimer.activebox" name="visualtimer.activebox" class="pilcrow"></a>
VisualTimer.activeBox
  </h3>
</div>
</div>
<div class="body">
<p>The <code>TimerBox</code> in which to display the time</p>
<p>This variable is always a reference to either <code>waitBox</code> or
<code>mainBox</code>.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">TimerBox</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.activeBox = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.isinitialized">
  <h3>
    <a href="#visualtimer.isinitialized" name="visualtimer.isinitialized" class="pilcrow"></a>
VisualTimer.isInitialized
  </h3>
</div>
</div>
<div class="body">
<p>Indicates whether the instance has been initializded already</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.isInitialized = <span class="hljs-literal">false</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.options">
  <h3>
    <a href="#visualtimer.options" name="visualtimer.options" class="pilcrow"></a>
VisualTimer.options
  </h3>
</div>
</div>
<div class="body">
<p>Currently stored options</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.options = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.internaltimer">
  <h3>
    <a href="#visualtimer.internaltimer" name="visualtimer.internaltimer" class="pilcrow"></a>
VisualTimer.internalTimer
  </h3>
</div>
</div>
<div class="body">
<p>TRUE, if the timer is created internally</p>
<p>Internal timers are destroyed when widget is destroyed or cleared</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.gameTimer</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.destroy</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.clear</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.internalTimer = <span class="hljs-literal">null</span>;
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="visualtimer-methods">
  <h2>
    <a href="#visualtimer-methods" name="visualtimer-methods" class="pilcrow"></a>
VisualTimer methods
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.init">
  <h3>
    <a href="#visualtimer.init" name="visualtimer.init" class="pilcrow"></a>
VisualTimer.init
  </h3>
</div>
</div>
<div class="body">
<p>Initializes the instance. When called again, adds options to current ones</p>
<p>The options it can take are:</p>
<ul>
<li>any options that can be passed to a <code>GameTimer</code></li>
<li>waitBoxOptions: an option object to be passed to <code>TimerBox</code></li>
<li>mainBoxOptions: an option object to be passed to <code>TimerBox</code></li>
</ul>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Configuration options
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">TimerBox</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> t, gameTimerOptions;

        options = options || {};
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'object'</span> !== <span class="hljs-keyword">typeof</span> options) {
            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'VisualTimer.init: options must be '</span> +
                                <span class="hljs-string">'object or undefined. Found: '</span> + options);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<p>Important! Do not modify directly options, because it might
modify a step-property. Will manual clone later.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        gameTimerOptions = {};

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<p>If gameTimer is not already set, check options, then
try to use node.game.timer, if defined, otherwise crete a new timer.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.gameTimer) {

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.gameTimer) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'GameTimer.init: options.gameTimer cannot '</span> +
                                <span class="hljs-string">'be set if a gameTimer is already existing: '</span> +
                                <span class="hljs-keyword">this</span>.name);
            }
            <span class="hljs-keyword">if</span> (<span class="hljs-string">'object'</span> !== <span class="hljs-keyword">typeof</span> options.gameTimer) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">TypeError</span>(<span class="hljs-string">'VisualTimer.init: options.'</span> +
                                    <span class="hljs-string">'gameTimer must be object or '</span> +
                                    <span class="hljs-string">'undefined. Found: '</span> + options.gameTimer);
            }
            <span class="hljs-keyword">this</span>.gameTimer = options.gameTimer;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isInitialized) {
                <span class="hljs-keyword">this</span>.internalTimer = <span class="hljs-literal">true</span>;
                <span class="hljs-keyword">this</span>.gameTimer = node.timer.createTimer({
                    <span class="hljs-attr">name</span>: options.name || <span class="hljs-string">'VisualTimer'</span>
                });
            }
        }

        <span class="hljs-keyword">if</span> (options.hooks) {
            <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.internalTimer) {
                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">'VisualTimer.init: cannot add hooks on '</span> +
                                <span class="hljs-string">'external gameTimer.'</span>);
            }
            <span class="hljs-keyword">if</span> (!J.isArray(options.hooks)) {
                gameTimerOptions.hooks = [ options.hooks ];
            }
        }
        <span class="hljs-keyword">else</span> {
            gameTimerOptions.hooks = [];
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>Only push this hook once.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.isInitialized) {
            gameTimerOptions.hooks.push({
                <span class="hljs-attr">name</span>: <span class="hljs-string">'VisualTimer_'</span> + <span class="hljs-keyword">this</span>.wid,
                <span class="hljs-attr">hook</span>: <span class="hljs-keyword">this</span>.updateDisplay,
                <span class="hljs-attr">ctx</span>: <span class="hljs-keyword">this</span>
            });
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<p>Important! Manual clone must be done after hooks and gameTimer.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Parse milliseconds option.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.milliseconds) {
            gameTimerOptions.milliseconds =
                node.timer.parseInput(<span class="hljs-string">'milliseconds'</span>, options.milliseconds);
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>Parse update option.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.update) {
            gameTimerOptions.update =
                node.timer.parseInput(<span class="hljs-string">'update'</span>, options.update);
        }
        <span class="hljs-keyword">else</span> {
            gameTimerOptions.update = <span class="hljs-number">1000</span>;
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<p>Parse timeup option.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> !== <span class="hljs-keyword">typeof</span> options.timeup) {
            gameTimerOptions.timeup = options.timeup;
        }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>Init the gameTimer, regardless of the source (internal vs external).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.gameTimer.init(gameTimerOptions);

        t = <span class="hljs-keyword">this</span>.gameTimer;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>TODO: not using session for now.
node.session.register('visualtimer', {
set: function(p) {
// TODO
},
get: function() {
return {
startPaused: t.startPaused,
status: t.status,
timeLeft: t.timeLeft,
timePassed: t.timePassed,
update: t.update,
updateRemaining: t.updateRemaining,
updateStart: t. updateStart
};
}
});</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">
        <span class="hljs-keyword">this</span>.options = gameTimerOptions;

        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.stopOnDone) {
            <span class="hljs-keyword">this</span>.options.stopOnDone = <span class="hljs-literal">true</span>;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">this</span>.options.startOnPlaying) {
            <span class="hljs-keyword">this</span>.options.startOnPlaying = <span class="hljs-literal">true</span>;
        }

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.options.mainBoxOptions) {
            <span class="hljs-keyword">this</span>.options.mainBoxOptions = {};
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.options.waitBoxOptions) {
            <span class="hljs-keyword">this</span>.options.waitBoxOptions = {};
        }

        J.mixout(<span class="hljs-keyword">this</span>.options.mainBoxOptions,
                {<span class="hljs-attr">classNameBody</span>: options.className, <span class="hljs-attr">hideTitle</span>: <span class="hljs-literal">true</span>});
        J.mixout(<span class="hljs-keyword">this</span>.options.waitBoxOptions,
                {<span class="hljs-attr">title</span>: <span class="hljs-string">'Max. wait timer'</span>,
                <span class="hljs-attr">classNameTitle</span>: <span class="hljs-string">'waitTimerTitle'</span>,
                <span class="hljs-attr">classNameBody</span>: <span class="hljs-string">'waitTimerBody'</span>, <span class="hljs-attr">hideBox</span>: <span class="hljs-literal">true</span>});

        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.mainBox) {
            <span class="hljs-keyword">this</span>.mainBox = <span class="hljs-keyword">new</span> TimerBox(<span class="hljs-keyword">this</span>.options.mainBoxOptions);
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.mainBox.init(<span class="hljs-keyword">this</span>.options.mainBoxOptions);
        }
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.waitBox) {
            <span class="hljs-keyword">this</span>.waitBox = <span class="hljs-keyword">new</span> TimerBox(<span class="hljs-keyword">this</span>.options.waitBoxOptions);
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.waitBox.init(<span class="hljs-keyword">this</span>.options.waitBoxOptions);
        }

        <span class="hljs-keyword">this</span>.activeBox = <span class="hljs-keyword">this</span>.options.activeBox || <span class="hljs-keyword">this</span>.mainBox;

        <span class="hljs-keyword">this</span>.isInitialized = <span class="hljs-literal">true</span>;
    };

    VisualTimer.prototype.append = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.mainBox.boxDiv);
        <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.waitBox.boxDiv);

        <span class="hljs-keyword">this</span>.activeBox = <span class="hljs-keyword">this</span>.mainBox;
        <span class="hljs-keyword">this</span>.updateDisplay();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.clear">
  <h3>
    <a href="#visualtimer.clear" name="visualtimer.clear" class="pilcrow"></a>
VisualTimer.clear
  </h3>
</div>
</div>
<div class="body">
<p>Reverts state of <code>VisualTimer</code> to right after creation</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Configuration object
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span class="dox_type">object</span>
<span>oldOptions The Old options
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">node.timer.destroyTimer</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.init</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.clear = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">var</span> oldOptions;
        options = options || {};
        oldOptions = <span class="hljs-keyword">this</span>.options;

        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.internalTimer) {
            node.timer.destroyTimer(<span class="hljs-keyword">this</span>.gameTimer);
            <span class="hljs-keyword">this</span>.internalTimer = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.gameTimer.removeHook(<span class="hljs-keyword">this</span>.updateHookName);
        }

        <span class="hljs-keyword">this</span>.gameTimer = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.activeBox = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.isInitialized = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.init(options);

        <span class="hljs-keyword">return</span> oldOptions;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.updatedisplay">
  <h3>
    <a href="#visualtimer.updatedisplay" name="visualtimer.updatedisplay" class="pilcrow"></a>
VisualTimer.updateDisplay
  </h3>
</div>
</div>
<div class="body">
<p>Changes <code>activeBox</code> to display current time of <code>gameTimer</code></p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">TimerBox.bodyDiv</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.updateDisplay = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> time, minutes, seconds;
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.gameTimer.milliseconds || <span class="hljs-keyword">this</span>.gameTimer.milliseconds === <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">this</span>.activeBox.bodyDiv.innerHTML = <span class="hljs-string">'00:00'</span>;
            <span class="hljs-keyword">return</span>;
        }
        time = <span class="hljs-keyword">this</span>.gameTimer.milliseconds - <span class="hljs-keyword">this</span>.gameTimer.timePassed;
        time = J.parseMilliseconds(time);
        minutes = (time[<span class="hljs-number">2</span>] &lt; <span class="hljs-number">10</span>) ? <span class="hljs-string">''</span> + <span class="hljs-string">'0'</span> + time[<span class="hljs-number">2</span>] : time[<span class="hljs-number">2</span>];
        seconds = (time[<span class="hljs-number">3</span>] &lt; <span class="hljs-number">10</span>) ? <span class="hljs-string">''</span> + <span class="hljs-string">'0'</span> + time[<span class="hljs-number">3</span>] : time[<span class="hljs-number">3</span>];
        <span class="hljs-keyword">this</span>.activeBox.bodyDiv.innerHTML = minutes + <span class="hljs-string">':'</span> + seconds;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.start">
  <h3>
    <a href="#visualtimer.start" name="visualtimer.start" class="pilcrow"></a>
VisualTimer.start
  </h3>
</div>
</div>
<div class="body">
<p>Starts the timer</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.updateDisplay</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer.start</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.start = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.updateDisplay();
        <span class="hljs-keyword">this</span>.gameTimer.start();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.restart">
  <h3>
    <a href="#visualtimer.restart" name="visualtimer.restart" class="pilcrow"></a>
VisualTimer.restart
  </h3>
</div>
</div>
<div class="body">
<p>Restarts the timer with new options</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Configuration object
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.init</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.start</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.stop</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.restart = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">this</span>.stop();
        <span class="hljs-keyword">this</span>.init(options);
        <span class="hljs-keyword">this</span>.start();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.stop">
  <h3>
    <a href="#visualtimer.stop" name="visualtimer.stop" class="pilcrow"></a>
VisualTimer.stop
  </h3>
</div>
</div>
<div class="body">
<p>Stops the timer display and stores the time left in <code>activeBox.timeLeft</code></p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Configuration object
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer.isStopped</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer.stop</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.stop = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.gameTimer.isStopped()) {
            <span class="hljs-keyword">this</span>.activeBox.timeLeft = <span class="hljs-keyword">this</span>.gameTimer.timeLeft;
            <span class="hljs-keyword">this</span>.gameTimer.stop();
        }
    };
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.switchactiveboxto">
  <h3>
    <a href="#visualtimer.switchactiveboxto" name="visualtimer.switchactiveboxto" class="pilcrow"></a>
VisualTimer.switchActiveBoxTo
  </h3>
</div>
</div>
<div class="body">
<p>Switches the display of the <code>gameTimer</code> into the <code>TimerBox</code> <code>box</code></p>
<p>Stores <code>gameTimer.timeLeft</code> into <code>activeBox</code> and then switches
<code>activeBox</code> to reference <code>box</code>.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">box</span>
<span class="dox_type">TimerBox</span>
<span>TimerBox in which to display <code>gameTimer</code> time
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.switchActiveBoxTo = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">box</span>) </span>{
        <span class="hljs-keyword">this</span>.activeBox.timeLeft = <span class="hljs-keyword">this</span>.gameTimer.timeLeft || <span class="hljs-number">0</span>;
        <span class="hljs-keyword">this</span>.activeBox = box;
        <span class="hljs-keyword">this</span>.updateDisplay();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.startwaiting">
  <h3>
    <a href="#visualtimer.startwaiting" name="visualtimer.startwaiting" class="pilcrow"></a>
VisualTimer.startWaiting
  </h3>
</div>
</div>
<div class="body">
<p>Stops the timer and changes the appearance to a max. wait timer</p>
<p>If options and/or options.milliseconds are undefined, the wait timer
will start with the current time left on the <code>gameTimer</code>. The mainBox
will be striked out, the waitBox set active and unhidden. All other
options are forwarded directly to <code>VisualTimer.restart</code>.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Configuration object
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.restart</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.startWaiting = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options) options = {};

        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.milliseconds) {
            options.milliseconds = <span class="hljs-keyword">this</span>.gameTimer.timeLeft;
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.mainBoxOptions) {
            options.mainBoxOptions = {};
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.waitBoxOptions) {
            options.waitBoxOptions = {};
        }
        options.mainBoxOptions.classNameBody = <span class="hljs-string">'strike'</span>;
        options.mainBoxOptions.timeLeft = <span class="hljs-keyword">this</span>.gameTimer.timeLeft || <span class="hljs-number">0</span>;
        options.activeBox = <span class="hljs-keyword">this</span>.waitBox;
        options.waitBoxOptions.hideBox = <span class="hljs-literal">false</span>;
        <span class="hljs-keyword">this</span>.restart(options);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.starttiming">
  <h3>
    <a href="#visualtimer.starttiming" name="visualtimer.starttiming" class="pilcrow"></a>
VisualTimer.startTiming
  </h3>
</div>
</div>
<div class="body">
<p>Starts the timer and changes appearance to a regular countdown</p>
<p>The mainBox will be unstriked and set active, the waitBox will be
hidden. All other options are forwarded directly to
<code>VisualTimer.restart</code>.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Configuration object
</span>
</div>
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">VisualTimer.restart</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.startTiming = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options) {
            options = {};
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.mainBoxOptions) {
            options.mainBoxOptions = {};
        }
        <span class="hljs-keyword">if</span> (<span class="hljs-string">'undefined'</span> === <span class="hljs-keyword">typeof</span> options.waitBoxOptions) {
            options.waitBoxOptions = {};
        }
        options.activeBox = <span class="hljs-keyword">this</span>.mainBox;
        options.waitBoxOptions.timeLeft = <span class="hljs-keyword">this</span>.gameTimer.timeLeft || <span class="hljs-number">0</span>;
        options.waitBoxOptions.hideBox = <span class="hljs-literal">true</span>;
        options.mainBoxOptions.classNameBody = <span class="hljs-string">''</span>;
        <span class="hljs-keyword">this</span>.restart(options);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.resume">
  <h3>
    <a href="#visualtimer.resume" name="visualtimer.resume" class="pilcrow"></a>
VisualTimer.resume
  </h3>
</div>
</div>
<div class="body">
<p>Resumes the <code>gameTimer</code></p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer.resume</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.resume = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.gameTimer.resume();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.settozero">
  <h3>
    <a href="#visualtimer.settozero" name="visualtimer.settozero" class="pilcrow"></a>
VisualTimer.setToZero
  </h3>
</div>
</div>
<div class="body">
<p>Stops <code>gameTimer</code> and sets <code>activeBox</code> to display <code>00:00</code></p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer.resume</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.setToZero = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.stop();
        <span class="hljs-keyword">this</span>.activeBox.bodyDiv.innerHTML = <span class="hljs-string">'00:00'</span>;
        <span class="hljs-keyword">this</span>.activeBox.setClassNameBody(<span class="hljs-string">'strike'</span>);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.istimeup">
  <h3>
    <a href="#visualtimer.istimeup" name="visualtimer.istimeup" class="pilcrow"></a>
VisualTimer.isTimeup
  </h3>
</div>
</div>
<div class="body">
<p>Returns TRUE if the timer expired</p>
<p>This method is added for backward compatibility.</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer.isTimeup</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.isTimeup = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.gameTimer.isTimeup();
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="visualtimer.dotimeup">
  <h3>
    <a href="#visualtimer.dotimeup" name="visualtimer.dotimeup" class="pilcrow"></a>
VisualTimer.doTimeUp
  </h3>
</div>
</div>
<div class="body">
<p>Stops the timer and calls the timeup</p>
</div>
<div class="details">
<div class="dox_tag_title">See</div>
<div class="dox_tag_detail">
<span class="dox_type">GameTimer.doTimeup</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    VisualTimer.prototype.doTimeUp = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.gameTimer.doTimeUp();
    };

    VisualTimer.prototype.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>Add listeners only on internal timer.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">if</span> (!<span class="hljs-keyword">this</span>.internalTimer) <span class="hljs-keyword">return</span>;

        node.on(<span class="hljs-string">'PLAYING'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">var</span> options;
            <span class="hljs-keyword">if</span> (that.options.startOnPlaying) {
                options = that.gameTimer.getStepOptions();
                <span class="hljs-keyword">if</span> (options) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>Visual update is here (1000 usually).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    options.update = that.update;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>Make sure timeup is not used (game.timer does it).</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    options.timeup = <span class="hljs-literal">undefined</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>Options other than <code>update</code>, <code>timeup</code>,
<code>milliseconds</code>, <code>hooks</code>, <code>gameTimer</code> are ignored.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    that.startTiming(options);
                }
                <span class="hljs-keyword">else</span> {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<p>Set to zero if it was not started already.</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    <span class="hljs-keyword">if</span> (!that.gameTimer.isRunning()) that.setToZero();
                }
            }
        });

        node.on(<span class="hljs-string">'REALLY_DONE'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
            <span class="hljs-keyword">if</span> (that.options.stopOnDone) {
                <span class="hljs-keyword">if</span> (!that.gameTimer.isStopped()) {
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<p>This was creating problems, so we just stop it.
It could be an option, though.
that.startWaiting();</p>

        </td>
        <td class="code highlight">
          <pre class="javascript">                    that.stop();
                }
            }
       });
    };

    VisualTimer.prototype.destroy = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.internalTimer) {
            node.timer.destroyTimer(<span class="hljs-keyword">this</span>.gameTimer);
            <span class="hljs-keyword">this</span>.internalTimer = <span class="hljs-literal">null</span>;
        }
        <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.gameTimer.removeHook(<span class="hljs-string">'VisualTimer_'</span> + <span class="hljs-keyword">this</span>.wid);
        }
        <span class="hljs-keyword">this</span>.bodyDiv.removeChild(<span class="hljs-keyword">this</span>.mainBox.boxDiv);
        <span class="hljs-keyword">this</span>.bodyDiv.removeChild(<span class="hljs-keyword">this</span>.waitBox.boxDiv);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox">
  <h1>
    <a href="#timerbox" name="timerbox" class="pilcrow"></a>
TimerBox
  </h1>
</div>
</div>
<div class="body">
<p>Copyright(c) 2015 Stefano Balietti
MIT Licensed</p>
<p>Represents a box wherin to display a <code>VisualTimer</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox-constructor">
  <h2>
    <a href="#timerbox-constructor" name="timerbox-constructor" class="pilcrow"></a>
TimerBox constructor
  </h2>
</div>
</div>
<div class="body">
<p><code>TimerBox</code> represents a box wherein to display the timer</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Configuration options   The options it can take are:
<ul>
<li><code>hideTitle</code></li>
<li><code>hideBody</code></li>
<li><code>hideBox</code></li>
<li><code>title</code></li>
<li><code>classNameTitle</code></li>
<li><code>classNameBody</code></li>
<li><code>timeLeft</code></li>
</ul>
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">TimerBox</span>(<span class="hljs-params">options</span>) </span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.boxdiv">
  <h3>
    <a href="#timerbox.boxdiv" name="timerbox.boxdiv" class="pilcrow"></a>
TimerBox.boxDiv
  </h3>
</div>
</div>
<div class="body">
<p>The Div which will contain the title and body Divs</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.boxDiv = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.titlediv">
  <h3>
    <a href="#timerbox.titlediv" name="timerbox.titlediv" class="pilcrow"></a>
TimerBox.titleDiv
  </h3>
</div>
</div>
<div class="body">
<p>The Div which will contain the title</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.titleDiv = <span class="hljs-literal">null</span>;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.bodydiv">
  <h3>
    <a href="#timerbox.bodydiv" name="timerbox.bodydiv" class="pilcrow"></a>
TimerBox.bodyDiv
  </h3>
</div>
</div>
<div class="body">
<p>The Div which will contain the numbers</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.bodyDiv = <span class="hljs-literal">null</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.timeleft">
  <h3>
    <a href="#timerbox.timeleft" name="timerbox.timeleft" class="pilcrow"></a>
TimerBox.timeLeft
  </h3>
</div>
</div>
<div class="body">
<p>Used to store the last value before focus is taken away</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.timeLeft = <span class="hljs-literal">null</span>;

        <span class="hljs-keyword">this</span>.boxDiv =   W.get(<span class="hljs-string">'div'</span>);
        <span class="hljs-keyword">this</span>.titleDiv = W.add(<span class="hljs-string">'div'</span>, <span class="hljs-keyword">this</span>.boxDiv);
        <span class="hljs-keyword">this</span>.bodyDiv =  W.add(<span class="hljs-string">'div'</span>, <span class="hljs-keyword">this</span>.boxDiv);

        <span class="hljs-keyword">this</span>.init(options);
    }

    TimerBox.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        <span class="hljs-keyword">if</span> (options) {
            <span class="hljs-keyword">if</span> (options.hideTitle) {
                <span class="hljs-keyword">this</span>.hideTitle();
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.unhideTitle();
            }
            <span class="hljs-keyword">if</span> (options.hideBody) {
                <span class="hljs-keyword">this</span>.hideBody();
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.unhideBody();
            }
            <span class="hljs-keyword">if</span> (options.hideBox) {
                <span class="hljs-keyword">this</span>.hideBox();
            }
            <span class="hljs-keyword">else</span> {
                <span class="hljs-keyword">this</span>.unhideBox();
            }
        }

        <span class="hljs-keyword">this</span>.setTitle(options.title || <span class="hljs-string">''</span>);
        <span class="hljs-keyword">this</span>.setClassNameTitle(options.classNameTitle || <span class="hljs-string">''</span>);
        <span class="hljs-keyword">this</span>.setClassNameBody(options.classNameBody || <span class="hljs-string">''</span>);

        <span class="hljs-keyword">if</span> (options.timeLeft) {
            <span class="hljs-keyword">this</span>.timeLeft = options.timeLeft;
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="timerbox-methods">
  <h2>
    <a href="#timerbox-methods" name="timerbox-methods" class="pilcrow"></a>
TimerBox methods
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.hidebox">
  <h3>
    <a href="#timerbox.hidebox" name="timerbox.hidebox" class="pilcrow"></a>
TimerBox.hideBox
  </h3>
</div>
</div>
<div class="body">
<p>Hides entire <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.hideBox = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.boxDiv.style.display = <span class="hljs-string">'none'</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.unhidebox">
  <h3>
    <a href="#timerbox.unhidebox" name="timerbox.unhidebox" class="pilcrow"></a>
TimerBox.unhideBox
  </h3>
</div>
</div>
<div class="body">
<p>Hides entire <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.unhideBox = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.boxDiv.style.display = <span class="hljs-string">''</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.hidetitle">
  <h3>
    <a href="#timerbox.hidetitle" name="timerbox.hidetitle" class="pilcrow"></a>
TimerBox.hideTitle
  </h3>
</div>
</div>
<div class="body">
<p>Hides title of <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.hideTitle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.titleDiv.style.display = <span class="hljs-string">'none'</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.unhidetitle">
  <h3>
    <a href="#timerbox.unhidetitle" name="timerbox.unhidetitle" class="pilcrow"></a>
TimerBox.unhideTitle
  </h3>
</div>
</div>
<div class="body">
<p>Unhides title of <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.unhideTitle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.titleDiv.style.display = <span class="hljs-string">''</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.hidebody">
  <h3>
    <a href="#timerbox.hidebody" name="timerbox.hidebody" class="pilcrow"></a>
TimerBox.hideBody
  </h3>
</div>
</div>
<div class="body">
<p>Hides body of <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.hideBody = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.bodyDiv.style.display = <span class="hljs-string">'none'</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.unhidebody">
  <h3>
    <a href="#timerbox.unhidebody" name="timerbox.unhidebody" class="pilcrow"></a>
TimerBox.unhideBody
  </h3>
</div>
</div>
<div class="body">
<p>Unhides Body of <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.unhideBody = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">this</span>.bodyDiv.style.display = <span class="hljs-string">''</span>;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.settitle">
  <h3>
    <a href="#timerbox.settitle" name="timerbox.settitle" class="pilcrow"></a>
TimerBox.setTitle
  </h3>
</div>
</div>
<div class="body">
<p>Sets title of <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.setTitle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">title</span>) </span>{
        <span class="hljs-keyword">this</span>.titleDiv.innerHTML = title;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.setclassnametitle">
  <h3>
    <a href="#timerbox.setclassnametitle" name="timerbox.setclassnametitle" class="pilcrow"></a>
TimerBox.setClassNameTitle
  </h3>
</div>
</div>
<div class="body">
<p>Sets class name of title of <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.setClassNameTitle = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">className</span>) </span>{
        <span class="hljs-keyword">this</span>.titleDiv.className = className;
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="timerbox.setclassnamebody">
  <h3>
    <a href="#timerbox.setclassnamebody" name="timerbox.setclassnamebody" class="pilcrow"></a>
TimerBox.setClassNameBody
  </h3>
</div>
</div>
<div class="body">
<p>Sets class name of body of <code>TimerBox</code></p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    TimerBox.prototype.setClassNameBody = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">className</span>) </span>{
        <span class="hljs-keyword">this</span>.bodyDiv.className = className;
    };

})(node);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
