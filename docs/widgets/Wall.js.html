<!DOCTYPE html>
<html>
<head>
  <title>Wall.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../doc-style.css" />
  <script src="../doc-filelist.js"></script>
  <script>
    var relativeDir = "../";
    var thisFile = "widgets/Wall.js";
    var defaultSidebar = true;
  </script>
  <script src="../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h1">
        <a href="#wall">Wall</a>
      </div>

      <div class="heading h2">
        <a href="#meta-data">Meta-data</a>
      </div>

      <div class="heading h2">
        <a href="#dependencies">Dependencies</a>
      </div>

      <div class="heading h2">
        <a href="#wall-constructor">Wall constructor</a>
      </div>

      <div class="heading h3">
        <a href="#wall.name">Wall.name</a>
      </div>

      <div class="heading h3">
        <a href="#wall.buffer">Wall.buffer</a>
      </div>

      <div class="heading h3">
        <a href="#wall.counter">Wall.counter</a>
      </div>

      <div class="heading h3">
        <a href="#wall.wall">Wall.wall</a>
      </div>

      <div class="heading h2">
        <a href="#wall-methods">Wall methods</a>
      </div>

      <div class="heading h3">
        <a href="#wall.init">Wall.init</a>
      </div>

      <div class="heading h3">
        <a href="#wall.listeners">Wall.listeners</a>
      </div>

      <div class="heading h3">
        <a href="#wall.write">Wall.write</a>
      </div>

      <div class="heading h3">
        <a href="#wall.debuffer">Wall.debuffer</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall">
  <h1>
    <a href="#wall" name="wall" class="pilcrow"></a>
Wall
  </h1>
</div>
<p>Copyright(c) 2017 Stefano Balietti
MIT Licensed</p>
</div>
<div class="body">
<p>Creates a wall where logs and other info is added with number and timestamp</p>
<p>www.nodegame.org</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">node</span>) </span>{
<span class="hljs-meta">
    "use strict"</span>;

    node.widgets.register(<span class="hljs-string">'Wall'</span>, Wall);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="meta-data">
  <h2>
    <a href="#meta-data" name="meta-data" class="pilcrow"></a>
Meta-data
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    Wall.version = <span class="hljs-string">'0.3.1'</span>;
    Wall.description = <span class="hljs-string">'Intercepts all LOG events and prints them into a PRE '</span> +
                       <span class="hljs-string">'element with an ordinal number and a timestamp.'</span>;

    Wall.title = <span class="hljs-string">'Wall'</span>;
    Wall.className = <span class="hljs-string">'wall'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="dependencies">
  <h2>
    <a href="#dependencies" name="dependencies" class="pilcrow"></a>
Dependencies
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
    Wall.dependencies = {
        <span class="hljs-attr">JSUS</span>: {}
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall-constructor">
  <h2>
    <a href="#wall-constructor" name="wall-constructor" class="pilcrow"></a>
Wall constructor
  </h2>
</div>
</div>
<div class="body">
<p><code>Wall</code> prints all LOG events into a PRE.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">options</span>
<span class="dox_type">object</span>
<span>Optional. Configuration options
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Wall</span>(<span class="hljs-params">options</span>) </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.name">
  <h3>
    <a href="#wall.name" name="wall.name" class="pilcrow"></a>
Wall.name
  </h3>
</div>
</div>
<div class="body">
<p>The name of this Wall</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.name = options.name || <span class="hljs-keyword">this</span>.name;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.buffer">
  <h3>
    <a href="#wall.buffer" name="wall.buffer" class="pilcrow"></a>
Wall.buffer
  </h3>
</div>
</div>
<div class="body">
<p>Buffer for logs which are to be logged before the document is ready</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.buffer = [];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.counter">
  <h3>
    <a href="#wall.counter" name="wall.counter" class="pilcrow"></a>
Wall.counter
  </h3>
</div>
</div>
<div class="body">
<p>Counts number of entries on wall</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.counter = <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.wall">
  <h3>
    <a href="#wall.wall" name="wall.wall" class="pilcrow"></a>
Wall.wall
  </h3>
</div>
</div>
<div class="body">
<p>The PRE in which to write</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">        <span class="hljs-keyword">this</span>.wall = W.get(<span class="hljs-string">'pre'</span>, <span class="hljs-keyword">this</span>.id);
    }

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap" id="wall-methods">
  <h2>
    <a href="#wall-methods" name="wall-methods" class="pilcrow"></a>
Wall methods
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.init">
  <h3>
    <a href="#wall.init" name="wall.init" class="pilcrow"></a>
Wall.init
  </h3>
</div>
</div>
<div class="body">
<p>Initializes the instance</p>
<p>If options are provided, the counter is set to <code>options.counter</code>
otherwise nothing happens.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    Wall.prototype.init = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">options</span>) </span>{
        options = options || {};
        <span class="hljs-keyword">this</span>.counter = options.counter || <span class="hljs-keyword">this</span>.counter;
    };

    Wall.prototype.append = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.bodyDiv.appendChild(<span class="hljs-keyword">this</span>.wall);
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.listeners">
  <h3>
    <a href="#wall.listeners" name="wall.listeners" class="pilcrow"></a>
Wall.listeners
  </h3>
</div>
</div>
<div class="body">
<p>Wall has a listener to the <code>LOG</code> event</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    Wall.prototype.listeners = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> that = <span class="hljs-keyword">this</span>;
        node.on(<span class="hljs-string">'LOG'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">msg</span>) </span>{
            that.debuffer();
            that.write(msg);
        });
    };


</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.write">
  <h3>
    <a href="#wall.write" name="wall.write" class="pilcrow"></a>
Wall.write
  </h3>
</div>
</div>
<div class="body">
<p>Writes argument as first entry of this.wall if document is fully loaded</p>
<p>Writes into this.buffer if document is not ready yet.</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    Wall.prototype.write = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">text</span>) </span>{
        <span class="hljs-keyword">var</span> mark;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.readyState !== <span class="hljs-string">'complete'</span>) {
            <span class="hljs-keyword">this</span>.buffer.push(text);
        }
        <span class="hljs-keyword">else</span> {
            mark = <span class="hljs-keyword">this</span>.counter++ + <span class="hljs-string">') '</span> + J.getTime() + <span class="hljs-string">' '</span>;
            <span class="hljs-keyword">this</span>.wall.innerHTML = mark + text + <span class="hljs-string">"\n"</span> + <span class="hljs-keyword">this</span>.wall.innerHTML;
        }
    };

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="dox">
<div class="summary">
<div class="pilwrap" id="wall.debuffer">
  <h3>
    <a href="#wall.debuffer" name="wall.debuffer" class="pilcrow"></a>
Wall.debuffer
  </h3>
</div>
</div>
<div class="body">
<p>If the document is ready, the buffer content is written into this.wall</p>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="javascript">    Wall.prototype.debuffer = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
        <span class="hljs-keyword">var</span> i;
        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">document</span>.readyState === <span class="hljs-string">'complete'</span> &amp;&amp; <span class="hljs-keyword">this</span>.buffer.length &gt; <span class="hljs-number">0</span>) {
            <span class="hljs-keyword">for</span> (i=<span class="hljs-number">0</span>; i &lt; <span class="hljs-keyword">this</span>.buffer.length; i++) {
                <span class="hljs-keyword">this</span>.write(<span class="hljs-keyword">this</span>.buffer[i]);
            }
            <span class="hljs-keyword">this</span>.buffer = [];
        }
    };

})(node);

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
